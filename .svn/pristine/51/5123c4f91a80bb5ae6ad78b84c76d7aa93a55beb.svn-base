{"version":3,"sources":["assets\\Script\\UI\\DingQuePanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport { CardTypeEnum } from \"../enum/EnumManager\";\r\nimport UserInfo from \"../Game/info/UserInfo\";\r\nimport { Msg_CS_DingQue } from \"../proto/TableMsg\";\r\nimport { Global } from \"../Shared/GloBal\";\r\nimport Utils from \"../Shared/Utils\";\r\nimport UIBase from \"../UIBase\";\r\nimport { MajCardLight } from \"../utils/InterfaceHelp\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class DingQuePanel extends UIBase {\r\n    @property (cc.Button)\r\n    wanBtn : cc.Button = null;\r\n    @property (cc.Button)\r\n    tiaoBtn : cc.Button = null;\r\n    @property (cc.Button)\r\n    tongBtn : cc.Button = null;\r\n    \r\n    @property (cc.Sprite)\r\n    wanBg : cc.Sprite = null;\r\n    @property (cc.Sprite)\r\n    tiaoBg : cc.Sprite = null;\r\n    @property (cc.Sprite)\r\n    tongBg : cc.Sprite = null;\r\n    \r\n\r\n    private moreCardArr:Array<number> = [];\r\n    protected onLoad(): void {\r\n        this.initBtnBg();\r\n        let smallTypeArr:Array<number> = this.getTheBestQue();\r\n        this.showSmallRecom(smallTypeArr);\r\n        \r\n    }\r\n    private initBtnBg(){\r\n        this.wanBg.node.active = false;\r\n        this.tiaoBg.node.active = false;\r\n        this.tongBg.node.active = false;\r\n    }\r\n\r\n    onWanBtnClick(){\r\n        let isMore:boolean = this.moreCardArr.indexOf(CardTypeEnum.Wan) >= 0;\r\n        if(isMore){\r\n            Global.Utils.dialogOutput(\"当你选择的花色手牌>=5张，是否确认选择？\");\r\n        }\r\n        this.sendDingQue(CardTypeEnum.Wan);\r\n    }\r\n    onTiaoBtnClick(){\r\n        let isMore:boolean = this.moreCardArr.indexOf(CardTypeEnum.Tiao) >= 0;\r\n        if(isMore){\r\n            Global.Utils.dialogOutput(\"当你选择的花色手牌>=5张，是否确认选择？\");\r\n        }\r\n        this.sendDingQue(CardTypeEnum.Tiao);\r\n    }\r\n    onTongBtnClick(){\r\n        let isMore:boolean = this.moreCardArr.indexOf(CardTypeEnum.Tong) >= 0;\r\n        if(isMore){\r\n            Global.Utils.dialogOutput(\"当你选择的花色手牌>=5张，是否确认选择？\");\r\n        }\r\n        this.sendDingQue(CardTypeEnum.Tong);\r\n    }\r\n    private sendDingQue(queType:CardTypeEnum){\r\n        let msg : Msg_CS_DingQue = new Msg_CS_DingQue();\r\n\t\tmsg.wtt = queType;\r\n\t\tGlobal.mgr.socketMgr.send(-1,msg);\r\n        UserInfo.ins.myDiceType = queType;\r\n        this.disTory();\r\n    }\r\n    private showSmallRecom(arr:Array<number>){\r\n        switch(arr[0]){\r\n            case CardTypeEnum.Wan:\r\n                this.wanBg.node.active = true;\r\n            break;\r\n            case CardTypeEnum.Tiao:\r\n                this.tiaoBg.node.active = true;\r\n            break;\r\n            case CardTypeEnum.Tong:\r\n                this.tongBg.node.active = true;\r\n            break;\r\n        }\r\n    }\r\n\r\n    private getTheBestQue():Array<number>{\r\n        let myCardArr:Array<number> = Global.Utils.cloneArr(UserInfo.ins.myHandCardArr);\r\n        let wanArr:Array<number> = [];\r\n        let tiaoArr:Array<number> = [];\r\n        let tongArr:Array<number> = [];\r\n        let cardNum:number = 0;\r\n        for(let i = 0 ; i < myCardArr.length ; i++){\r\n            cardNum = Math.floor(myCardArr[i]/10); \r\n            if(cardNum == 0){\r\n                wanArr.push(myCardArr[i])\r\n            }else if(cardNum == 1){\r\n                tiaoArr.push(myCardArr[i])\r\n            }else if(cardNum == 2){\r\n                tongArr.push(myCardArr[i])\r\n            }\r\n        }\r\n        if(wanArr.length >= 5){\r\n            this.moreCardArr.push(CardTypeEnum.Wan);\r\n        }\r\n        if(tiaoArr.length >= 5){\r\n            this.moreCardArr.push(CardTypeEnum.Tiao);\r\n        }\r\n        if(tongArr.length >= 5){\r\n            this.moreCardArr.push(CardTypeEnum.Tong);\r\n        }\r\n        let haveMoreNum:number = -1;\r\n        let moreArr:Array<Array<number>> = [];\r\n        let moreArrType:Array<number> = [];\r\n        if(wanArr.length == tiaoArr.length && wanArr.length < tongArr.length){\r\n            haveMoreNum = wanArr.length;\r\n            moreArr = [wanArr,tiaoArr];\r\n            moreArrType = [0,1];\r\n        }\r\n        if(wanArr.length == tongArr.length && wanArr.length < tiaoArr.length){\r\n            haveMoreNum = wanArr.length;\r\n            moreArr = [wanArr,tongArr];\r\n            moreArrType = [0,2];\r\n        }\r\n        if(tongArr.length == tiaoArr.length && tongArr.length < wanArr.length){\r\n            haveMoreNum = wanArr.length;\r\n            moreArr = [tongArr,tiaoArr];\r\n            moreArrType = [2,1];\r\n        }\r\n        let smallType:Array<number> = [];\r\n        if(haveMoreNum >= 0){\r\n            let weight0 : number = this.getCardAllWeight(moreArr[0]);\r\n            let weight1 : number = this.getCardAllWeight(moreArr[1]);\r\n            if(weight0 == weight1){\r\n                smallType = moreArrType\r\n            }else{\r\n                smallType[0] = weight0 < weight1 ? moreArrType[0] : moreArrType[1]\r\n            }\r\n        }else{\r\n            let smallArr:Array<number> = wanArr;\r\n            smallType[0] = CardTypeEnum.Wan;\r\n            if(tiaoArr.length < smallArr.length){\r\n                smallType[0] = CardTypeEnum.Tiao;\r\n                smallArr = tiaoArr;\r\n            }\r\n            if(tongArr.length < smallArr.length){\r\n                smallType[0] = CardTypeEnum.Tong;\r\n                smallArr = tongArr;\r\n            }\r\n        }\r\n        return smallType;\r\n    }\r\n    /**获取换三张默认推荐**/\r\n\tprivate getCardAllWeight(nowArr:Array<number>):number{\r\n\t\tlet dic : Array<MajCardLight> = [];\r\n\t\tlet aOne:number;\r\n\t\tlet aTwo : number;\r\n\t\tlet now : number;\r\n\t\tlet lOne:number;\r\n\t\tlet lTwo : number;\r\n\t\tlet lThree: number;\r\n\t\tlet msjLight:MajCardLight = new MajCardLight();\r\n\t\tlet light:number;\r\n\t\tfor(let i = 0 ; i < nowArr.length ; i++){\r\n\t\t\tlight = 0;\r\n\t\t\taOne = nowArr[i-1];\r\n\t\t\taTwo = nowArr[i-2];\r\n\t\t\tnow = nowArr[i];\r\n\t\t\tlOne = nowArr[i+1];\r\n\t\t\tlTwo = nowArr[i+2];\r\n\t\t\tlThree = nowArr[i+3];\r\n\t\t\tif(dic[now]){\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tmsjLight.cardValue = now;\r\n\t\t\t/**相邻*/\r\n\t\t\tif(aOne && now == aOne+1 && this.isOne(now , aOne)){\r\n\t\t\t\tlight += 20;\r\n\t\t\t}\r\n\t\t\tif(lOne && now == lOne-1 && this.isOne(now , lOne)){\r\n\t\t\t\tlight += 20;\r\n\t\t\t}\r\n\t\t\t/**相隔*/\r\n\t\t\tif(aTwo && now == aTwo+2 && this.isOne(now , aTwo)){\r\n\t\t\t\tlight += 10;\r\n\t\t\t}\r\n\t\t\tif(lTwo && now == lTwo-2 && this.isOne(now , lTwo)){\r\n\t\t\t\tlight += 10;\r\n\t\t\t}\r\n\t\t\t/***两同*/\r\n\t\t\tif(lOne && now==lOne && this.isOne(now , lTwo)){\r\n\t\t\t\tlight+=80;\r\n\t\t\t\t/***三同*/\r\n\t\t\t\tif(lTwo && now==lTwo && this.isOne(now , lTwo)){\r\n\t\t\t\t\tlight+=300;\r\n\t\t\t\t\t/***四同*/\r\n\t\t\t\t\tif(lThree && now==lThree && this.isOne(now , lThree)){\r\n\t\t\t\t\t\tlight+=500;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tmsjLight.cardLight = light;\r\n\t\t\tdic[now]=msjLight;\r\n\r\n\t\t}\r\n        let allWeight:number = 0;\r\n        for(let i = 0 ; i < nowArr.length ; i++){\r\n            allWeight += dic[nowArr[i]].cardLight;\r\n        }\r\n        return allWeight;\r\n\t}\r\n    private isOne(a:number , b:number){\r\n\t\tif(Math.floor(a/10) == Math.floor(b/10)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n    disTory(){\r\n        super.disTory()\r\n    }\r\n}\r\n"]}