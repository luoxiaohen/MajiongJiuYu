{"version":3,"sources":["assets\\Script\\UI\\over\\InviteToRoomPannel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport EventType from \"../../event/EventType\";\r\nimport GameInfo from \"../../Game/info/GameInfo\";\r\nimport UserInfo from \"../../Game/info/UserInfo\";\r\nimport { Msg_CS_FindEnterRoom } from \"../../proto/TableMsg\";\r\nimport { Global } from \"../../Shared/GloBal\";\r\nimport UIBase from \"../../UIBase\";\r\nimport CardHelpManager from \"../card/CardHelpManager\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class InviteToRoomPannel extends UIBase {\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    protected invite_player_label:cc.Label;\r\n    protected game_type_label:cc.Label;\r\n    protected room_name_label:cc.Label;\r\n    protected room_id_label:cc.Label;\r\n    protected down_score_label:cc.Label;\r\n    protected game_hand_label:cc.Label;\r\n    protected game_rule_label:cc.Label;\r\n    protected time_label:cc.Label;\r\n    private cutDownTime=30;\r\n\r\n    onLoad () {\r\n        let labelNode=this.node.getChildByName(\"label_node\");\r\n        this.invite_player_label=labelNode.getChildByName(\"invite_player_label\").getComponent(cc.Label);\r\n        this.game_type_label=labelNode.getChildByName(\"game_type_label\").getComponent(cc.Label);\r\n        this.room_name_label=labelNode.getChildByName(\"room_name_label\").getComponent(cc.Label);\r\n        this.room_id_label=labelNode.getChildByName(\"room_id_label\").getComponent(cc.Label);\r\n        this.down_score_label=labelNode.getChildByName(\"down_score_label\").getComponent(cc.Label);\r\n        this.game_hand_label=labelNode.getChildByName(\"game_hand_label\").getComponent(cc.Label);\r\n        this.game_rule_label=labelNode.getChildByName(\"game_rule_label\").getComponent(cc.Label);\r\n        let refuse_btn=this.node.getChildByName(\"refuse_btn\");\r\n        this.time_label=refuse_btn.getChildByName(\"time_label\").getComponent(cc.Label);;\r\n    }\r\n    start () {\r\n        let inviteInfo=GameInfo.ins.gameInviteData;\r\n        if(!inviteInfo){\r\n            return;\r\n        }\r\n        let  ruleInfo=inviteInfo.info;\r\n        let gameName:string = Global.Utils.getGameNameByGameType(ruleInfo.gamePlayType);\r\n        let gameType:string = Global.Utils.getGameTypeNameByGameType(ruleInfo.roomType);\r\n        let roomName = gameName + \"-\"+ gameType;\r\n        this.game_type_label.string=roomName;\r\n        this.game_rule_label.string=Global.Utils.getRoomTableInfoStr(ruleInfo);\r\n        this.invite_player_label.string=inviteInfo.inviter;\r\n        this.room_id_label.string=inviteInfo.roomCode.toString();\r\n        this.down_score_label.string=ruleInfo.baseScore.toString();\r\n        this.game_hand_label.string=ruleInfo.handsCnt.toString();\r\n        let refuse_btn=this.node.getChildByName(\"refuse_btn\");\r\n        this.time_label=refuse_btn.getChildByName(\"time_label\").getComponent(cc.Label);\r\n        this.showCutDownTime();\r\n        this.schedule(this.showCutDownTime,1,this.cutDownTime);\r\n    }\r\n    private showCutDownTime():void{\r\n        this.time_label.string=this.cutDownTime.toString();\r\n        this.cutDownTime--;\r\n        Global.Utils.debugOutput(\"倒计时：   \"+this.cutDownTime);\r\n        if(this.cutDownTime<=0){\r\n            this.disTory();\r\n        }\r\n    }\r\n\r\n    onAgreeBtn():void{\r\n        GameInfo.ins.initOver();\r\n\t\tUserInfo.ins.initOver();\r\n\t\tCardHelpManager.ins.initOver();\r\n        UserInfo.ins.mySitIndex=-1;\r\n        let msg=new Msg_CS_FindEnterRoom();\r\n        msg.code=GameInfo.ins.gameInviteData.roomCode;\r\n        Global.mgr.socketMgr.send(-1,msg);\r\n    }\r\n    onRefuseBtn():void{\r\n        Global.EventCenter.dispatchEvent(EventType.BackToLobby);\r\n    }\r\n    protected onDestroy(): void {\r\n        this.unscheduleAllCallbacks();\r\n    }\r\n\r\n\r\n    // update (dt) {}\r\n}\r\n"]}