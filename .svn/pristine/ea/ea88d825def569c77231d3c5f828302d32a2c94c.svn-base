{"version":3,"sources":["assets\\Script\\UI\\card\\MajiongEatItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport { EatCardEnum } from \"../../enum/EnumManager\";\r\nimport { Global } from \"../../Shared/GloBal\";\r\nimport UIBase from \"../../UIBase\";\r\nimport { PengGangData } from \"../../utils/InterfaceHelp\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class MajiongEatItem extends UIBase {\r\n    @property(cc.Node)\r\n    majiongEat0 : cc.Node = null;\r\n    @property(cc.Node)\r\n    majiongEat1 : cc.Node = null;\r\n    @property(cc.Node)\r\n    majiongEat2 : cc.Node = null;\r\n    @property(cc.Node)\r\n    majiongEat3 : cc.Node = null;\r\n\r\n    public eatSplc:Array<number> = [20 , 10 , 20 , 10];\r\n\r\n    private _size: cc.Vec2;\r\n    public get size(): cc.Vec2 {\r\n        return this._size;\r\n    }\r\n    public set size(value: cc.Vec2) {\r\n        this._size = value;\r\n    }\r\n\r\n    private _eatData: PengGangData;\r\n    public get eatData(): PengGangData {\r\n        return this._eatData;\r\n    }\r\n    public set eatData(value: PengGangData) {\r\n        this._eatData = value;\r\n        this.creatElements();\r\n    }\r\n    protected onLoad(): void {\r\n    }\r\n    private creatElements(){\r\n        this.changeSize();\r\n        this.showCardValue();\r\n        this.showItemNum();\r\n        this.showByImage();\r\n    }\r\n    public setNewData(eatType:EatCardEnum){\r\n        this.eatData.eatType = eatType;\r\n        this.showItemNum();\r\n    }\r\n\r\n    public setPoint(addIndex:number){\r\n        switch(this.eatData.havePointBySelf){\r\n            case 0:\r\n                this.node.x = (addIndex-1)*this.size.x + (addIndex-1)*this.eatSplc[this.eatData.havePointBySelf];\r\n            break;\r\n            case 1:\r\n                this.node.x = this.size.x*-1 - addIndex*6 ;\r\n                this.node.y = this.size.y*(addIndex-1) + this.eatSplc[this.eatData.havePointBySelf]*(addIndex-1)\r\n            break;\r\n            case 2:\r\n                this.node.x = 819 - addIndex*this.size.x - (addIndex-1)*this.eatSplc[this.eatData.havePointBySelf]\r\n            break;\r\n            case 3:\r\n                this.node.x = addIndex*-6 - this.size.x/2 ;\r\n                this.node.y = 560 - addIndex*this.size.y - (addIndex-1)*this.eatSplc[this.eatData.havePointBySelf]\r\n            break;\r\n        }\r\n    }\r\n    private showByImage(){\r\n        let nowNode : cc.Node = this.getNowNode();\r\n        let changeAngel : number = 0;\r\n        switch(this.eatData.eatType){\r\n            case EatCardEnum.EatOpposite , EatCardEnum.CrossOpposite , EatCardEnum.CrossAllOpp:\r\n                changeAngel += 2;\r\n            break;\r\n            case EatCardEnum.EatUp , EatCardEnum.CrossUp , EatCardEnum.CrossAllUp:\r\n                changeAngel += 3;\r\n            break;\r\n            case EatCardEnum.EatDown , EatCardEnum.CrossDown , EatCardEnum.CrossAllDown:\r\n                changeAngel += 1;\r\n            break;\r\n        }\r\n        let img : cc.Sprite = cc.find(\"selfImage\" , nowNode).getComponent(cc.Sprite);\r\n        let initRotation : number = img.node.angle;\r\n        img.node.angle = initRotation + changeAngel*90;\r\n    }\r\n    private showItemNum(){\r\n        let source : string = \"myEat3\";\r\n        if(this.eatData.eatType < 3){\r\n            let nowNode : cc.Node = this.getNowNode();\r\n            cc.find(source , nowNode).active = false;\r\n        }else{\r\n            let nowNode : cc.Node = this.getNowNode();\r\n            cc.find(source , nowNode).active = true;\r\n        }\r\n    }\r\n    private showCardValue(){\r\n        if(this.eatData.eatType == EatCardEnum.CrossSelf){\r\n            let source : string = \"majiongCard/resource/\"+Global.Utils.getCardStrByValue(this.eatData.cardValue)+\"_\" + this.eatData.havePointBySelf;\r\n            let nowNode : cc.Node = this.getNowNode();\r\n            let fontImage : cc.Sprite;\r\n            let bgImage : cc.Sprite;\r\n            fontImage = cc.find(\"myEat3/fontImage\" , nowNode).getComponent(cc.Sprite);\r\n            Global.Utils.setNewImageToSprite(fontImage , source);\r\n            for(let i = 0 ; i < 3 ; i++){\r\n                fontImage = cc.find(\"myEat\"+i+\"/fontImage\" , nowNode).getComponent(cc.Sprite);\r\n                fontImage.node.active = false;\r\n                bgImage = cc.find(\"myEat\"+i+\"/majiongBg\" , nowNode).getComponent(cc.Sprite);\r\n                bgImage.node.active = true;\r\n                let index:number = this.eatData.havePointBySelf ;\r\n                if(index == 3){\r\n                    index = 1\r\n                }\r\n                Global.Utils.setNewImageToSprite(bgImage , \"majiongCard/resource/\"+index+\"_0_4_2\",()=>{\r\n                    this.getNowNode().active = true;\r\n                });\r\n            }\r\n            \r\n        }else{   \r\n            let source : string = \"majiongCard/resource/\"+Global.Utils.getCardStrByValue(this.eatData.cardValue)+\"_\" + this.eatData.havePointBySelf;\r\n            let nowNode : cc.Node = this.getNowNode();\r\n            let fontImage : cc.Sprite;\r\n            for(let i = 0 ; i < 4 ; i++){\r\n                let s : string = \"myEat\"+i+\"/fontImage\";\r\n                fontImage = cc.find( s , nowNode).getComponent(cc.Sprite);\r\n                Global.Utils.setNewImageToSprite(fontImage , source , ()=>{\r\n                    nowNode.active = true;\r\n                });\r\n            }\r\n        }\r\n    }\r\n    @property (cc.Sprite)\r\n    XXfont : cc.Sprite = null;\r\n    private getNowNode():cc.Node{\r\n        switch(this.eatData.havePointBySelf){\r\n            case 0:\r\n                return this.majiongEat0;\r\n            break;\r\n            case 1:\r\n                return this.majiongEat1;\r\n            break;\r\n            case 2:\r\n                return this.majiongEat2;\r\n            break;\r\n            case 3:\r\n                return this.majiongEat3;\r\n            break;\r\n        }\r\n    }\r\n    private changeSize(){\r\n        switch(this.eatData.havePointBySelf){\r\n            case 0:\r\n                this.size = cc.v2(262,116);\r\n            break;\r\n            case 1:\r\n                this.size = cc.v2(72,135.5);\r\n            break;\r\n            case 2:\r\n                this.size = cc.v2(150,65);\r\n            break;\r\n            case 3:\r\n                this.size = cc.v2(72,135.5);\r\n            break;\r\n        }\r\n    }\r\n}\r\n"]}