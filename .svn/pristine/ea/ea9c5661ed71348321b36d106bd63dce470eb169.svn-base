{"version":3,"sources":["assets\\Script\\UI\\action\\GameIActiontem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["/*\r\n * @Author: error: git config user.name && git config user.email & please set dead value or install git\r\n * @Date: 2022-10-17 17:15:53\r\n * @LastEditors: error: git config user.name && git config user.email & please set dead value or install git\r\n * @LastEditTime: 2022-11-18 18:07:59\r\n * @FilePath: \\MajiongJiuYu\\assets\\Script\\UI\\action\\GameIActiontem.ts\r\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n */\r\n// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport { PlayStauteEnum } from \"../../enum/EnumManager\";\r\nimport GameInfo from \"../../Game/info/GameInfo\";\r\nimport UserInfo from \"../../Game/info/UserInfo\";\r\nimport { Msg_CS_GangSelfMsg, Msg_CS_HuMajMsg, Msg_CS_PassMsg, Msg_CS_PengMajMsg } from \"../../proto/TableMsg\";\r\nimport { Global } from \"../../Shared/GloBal\";\r\nimport UIBase from \"../../UIBase\";\r\nimport { EatCardClass, MyActionByOther } from \"../../utils/InterfaceHelp\";\r\nimport MajiongHandCard from \"../card/MajiongHandCard\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GameIActiontem extends UIBase {\r\n    @property (cc.Sprite)\r\n    gangBtn : cc.Sprite = null;\r\n    @property (cc.Sprite)\r\n    guoBtn : cc.Sprite = null;\r\n    @property (cc.Sprite)\r\n    pengBtn : cc.Sprite = null;\r\n    @property (cc.Sprite)\r\n    huBtn : cc.Sprite = null;\r\n    @property (cc.Sprite)\r\n    cardValueImage : cc.Sprite = null;\r\n    @property (cc.Label)\r\n    fenLabel : cc.Label = null;\r\n    @property (cc.Node)\r\n    huGroup : cc.Node = null;\r\n    @property (cc.Node)\r\n    pengMoreGroup : cc.Node = null;\r\n    @property (cc.Node)\r\n    moreBtnGroup : cc.Node = null;\r\n    private actionData:MyActionByOther;\r\n    protected onLoad(): void {\r\n        this.actionData = this.dialogParameters;\r\n        this.pengMoreGroup.active = false;\r\n        this.moreBtnGroup.active = true;\r\n        this.initItem();\r\n    }\r\n    private initItem(){\r\n        this.guoBtn.node.active = this.actionData.canGuo;\r\n        this.gangBtn.node.active = this.actionData.canGang;\r\n        this.pengBtn.node.active = this.actionData.canPeng;\r\n        this.huGroup.active = this.actionData.canHu;\r\n        if(this.actionData.canHu){\r\n            this.showHuGroup();\r\n        }\r\n    }\r\n    private showHuGroup(){\r\n        let newSource : string = \"majiongCard/resource/\" + Global.Utils.getCardStrByValue(this.actionData.huData.cardValue);\r\n        Global.Utils.setNewImageToSprite(this.cardValueImage , newSource);\r\n        this.fenLabel.string = this.actionData.huData.fanNum.toString();\r\n    }\r\n    /**碰*/\r\n    onPengClick(){\r\n        let msg : Msg_CS_PengMajMsg = new Msg_CS_PengMajMsg();\r\n        msg.isGang = 0;\r\n        Global.mgr.socketMgr.send(-1,msg);\r\n        this.disTory();\r\n    }\r\n    /**杠*/\r\n    onGangClick(){\r\n        if(GameInfo.ins.nowGameStatus == PlayStauteEnum.PlayCard){\r\n            let selfGameArr:Array<number> = UserInfo.ins.getSelfGang();\r\n            let buGameArr:Array<number> = UserInfo.ins.getBuGang();\r\n            if(selfGameArr.length + buGameArr.length > 1){\r\n                this.pengMoreGroup.active = true;\r\n                this.moreBtnGroup.active = false;\r\n                let aaa:Array<number> = selfGameArr.concat(buGameArr);\r\n                for(let i = 0 ; i < aaa.length  ; i++){\r\n                    let hand : MajiongHandCard = cc.instantiate(Global.Utils.getPreFabBySource(\"majiongCard/prefab/MajiongHandCard\")).getComponent(MajiongHandCard);\r\n                    hand.cardValue = aaa[i];\r\n                    hand.isLoadShow = true;\r\n                    hand.bySelfPoint = 0;\r\n                    hand.node.x = i*hand.cardSize._w + i*20\r\n                    this.pengMoreGroup.addChild(hand.node);\r\n                    hand.node.on(cc.Node.EventType.TOUCH_START , this.onCardItemClick , this)\r\n                }\r\n            }else{\r\n                if(UserInfo.ins.getSelfGang().length > 0){\r\n                    let msg : Msg_CS_GangSelfMsg = new Msg_CS_GangSelfMsg();\r\n                    msg.majID = UserInfo.ins.getSelfGang()[0];\r\n                    Global.mgr.socketMgr.send(-1 , msg);\r\n                }else if(UserInfo.ins.getBuGang().length > 0){\r\n                    let msg : Msg_CS_GangSelfMsg = new Msg_CS_GangSelfMsg();\r\n                    msg.majID = UserInfo.ins.getBuGang()[0];\r\n                    Global.mgr.socketMgr.send(-1 , msg);\r\n                }\r\n                this.disTory();\r\n            }\r\n        }else{\r\n            let msg : Msg_CS_PengMajMsg = new Msg_CS_PengMajMsg();\r\n            msg.isGang = 1;\r\n            Global.mgr.socketMgr.send(-1,msg);\r\n            this.disTory();\r\n        }\r\n    }\r\n    private onCardItemClick(e:cc.Event){\r\n        let item :MajiongHandCard = e.currentTarget.getComponent(MajiongHandCard);\r\n        if(UserInfo.ins.getSelfGang().indexOf(item.cardValue) >= 0){\r\n            let msg : Msg_CS_GangSelfMsg = new Msg_CS_GangSelfMsg();\r\n            msg.majID = item.cardValue;\r\n            Global.mgr.socketMgr.send(-1 , msg);\r\n        }else if(UserInfo.ins.getBuGang().indexOf(item.cardValue) >= 0){\r\n            let msg : Msg_CS_GangSelfMsg = new Msg_CS_GangSelfMsg();\r\n            msg.majID = item.cardValue;\r\n            Global.mgr.socketMgr.send(-1 , msg);\r\n        }\r\n        this.disTory();\r\n    }\r\n    /**胡*/\r\n    onHuClick(){\r\n        let msg : Msg_CS_HuMajMsg = new Msg_CS_HuMajMsg();\r\n        Global.mgr.socketMgr.send(-1,msg);\r\n        this.disTory();\r\n    }\r\n    /**过*/\r\n    onGuoClick(){\r\n        Global.mgr.socketMgr.send(-1 , new Msg_CS_PassMsg());\r\n        this.disTory();\r\n    }\r\n\r\n    disTory(){\r\n        super.disTory();\r\n    }\r\n}\r\n"]}