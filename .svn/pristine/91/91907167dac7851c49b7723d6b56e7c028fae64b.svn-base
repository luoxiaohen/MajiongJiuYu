{"version":3,"sources":["assets\\Script\\UI\\over\\BigOverPanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport { BigOverTypeEnum, GameRuleTypeEnum } from \"../../enum/EnumManager\";\r\nimport EventType from \"../../event/EventType\";\r\nimport GameInfo from \"../../Game/info/GameInfo\";\r\nimport UserInfo from \"../../Game/info/UserInfo\";\r\nimport { Msg_CS_CreateTable, Msg_CS_TableInvite, Msg_SC_InviteTable } from \"../../proto/LobbyMsg\";\r\nimport { TableRuleInfo } from \"../../proto/LobbyMsgDef\";\r\nimport { Msg_SC_GameOverMsg } from \"../../proto/TableMsg\";\r\nimport { FinalPlayerCalcInfo, RoomTableInfo } from \"../../proto/TableMsgDef\";\r\nimport { Global } from \"../../Shared/GloBal\";\r\nimport UIBase from \"../../UIBase\";\r\nimport BigOverHorseInfoItem from \"./BigOverHorseInfoItem\";\r\nimport BigOverPlayerInfoItem from \"./BigOverPlayerInfoItem\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n\r\nexport type BigOverPlayerInfoItemData={\r\n\ttype:number,\r\n    playr_rank_num:number,\r\n    player_head_url:string,\r\n    player_rank_url:string,\r\n    player_name:string,\r\n    player_ID:string,\r\n    zimo_num:number,\r\n    jiepao_num:number,\r\n    gangpai_num:number,\r\n    dianpao_num:number,\r\n    player_score:number,\r\n    duiju_num:number\r\n    zhuangma_num:number,\r\n    score_horse_num:number,\r\n\r\n    game_horse_url:string,\r\n    card_num:number\r\n}\r\n\r\n@ccclass\r\nexport default class NewClass extends UIBase {\r\n\r\n    @property(cc.Node)\r\n    contentNode: cc.Node = null;\r\n    private playerInfoItemPrefab: cc.Prefab;\r\n    private horsePlayerInfoItemPrfab:cc.Prefab;\r\n    private playerInfoItemArr:cc.Node[];\r\n    private horsePlayerInfoItem:BigOverHorseInfoItem;\r\n    private roomTypeLabel:cc.Label;\r\n    private roomNameLabel:cc.Label;\r\n    private createNmeLabel:cc.Label;\r\n    private downScoreNumLabel:cc.Label;\r\n    private sumBattleNumLabel:cc.Label;\r\n    private gameEndTimeLabel:cc.Label;\r\n    private downRulesLabel:cc.Label;\r\n\r\n    private ruleMapInfo:{[key:number]:string[]};\r\n\r\n    private viewType:number=0;\r\n    // LIFE-CYCLE CALLBACKS:\r\n    onLoad() {\r\n        this.playerInfoItemPrefab = Global.Utils.getPreFabBySource(\"smallOver/prefab/BigOverPlayerInfoItem\");\r\n        this.horsePlayerInfoItemPrfab=Global.Utils.getPreFabBySource(\"smallOver/prefab/BigOverHorseInfoItem\");\r\n        this.playerInfoItemArr=[];\r\n       \r\n        this.roomTypeLabel=this.node.getChildByName(\"room_type_label\").getComponent(cc.Label);\r\n        this.roomNameLabel=this.node.getChildByName(\"room_name_label\").getComponent(cc.Label);\r\n        this.createNmeLabel=this.node.getChildByName(\"create_name_label\").getComponent(cc.Label);\r\n        this.downScoreNumLabel=this.node.getChildByName(\"down_score_num_label\").getComponent(cc.Label);\r\n        this.sumBattleNumLabel=this.node.getChildByName(\"sum_battle_num_label\").getComponent(cc.Label);\r\n        this.gameEndTimeLabel=this.node.getChildByName(\"game_end_time_label\").getComponent(cc.Label);\r\n\r\n        this.downRulesLabel=this.node.getChildByName(\"down_rules_label\").getComponent(cc.Label);\r\n    }\r\n    start() {\r\n        let gameOverData=GameInfo.ins.gameOverData;\r\n        // let data={\"calcInfos\":[{\"bankerHScore\":0,\"dpCnt\":9,\"gpCnt\":0,\"jpCnt\":0,\"score\":-182,\"scoreHorse\":0,\"sit\":0,\"winChips\":18,\"zmCnt\":1},{\"bankerHScore\":0,\"dpCnt\":1,\"gpCnt\":0,\"jpCnt\":7,\"score\":6,\"scoreHorse\":0,\"sit\":1,\"winChips\":206,\"zmCnt\":0},{\"bankerHScore\":0,\"dpCnt\":3,\"gpCnt\":0,\"jpCnt\":2,\"score\":124,\"scoreHorse\":0,\"sit\":2,\"winChips\":324,\"zmCnt\":6},{\"bankerHScore\":0,\"dpCnt\":0,\"gpCnt\":0,\"jpCnt\":4,\"score\":52,\"scoreHorse\":0,\"sit\":3,\"winChips\":252,\"zmCnt\":4}],\"handCnt\":8,\"mid\":5,\"sid\":51};\r\n        // let data_1={\"calcInfos\":[{\"bankerHScore\":0,\"dpCnt\":9,\"gpCnt\":0,\"jpCnt\":0,\"score\":-182,\"scoreHorse\":0,\"sit\":0,\"winChips\":18,\"zmCnt\":1},{\"bankerHScore\":0,\"dpCnt\":1,\"gpCnt\":0,\"jpCnt\":7,\"score\":6,\"scoreHorse\":0,\"sit\":1,\"winChips\":206,\"zmCnt\":0},{\"bankerHScore\":0,\"dpCnt\":3,\"gpCnt\":0,\"jpCnt\":2,\"score\":124,\"scoreHorse\":0,\"sit\":2,\"winChips\":324,\"zmCnt\":6},{\"bankerHScore\":0,\"dpCnt\":0,\"gpCnt\":0,\"jpCnt\":4,\"score\":52,\"scoreHorse\":0,\"sit\":3,\"winChips\":252,\"zmCnt\":4},{\"bankerHScore\":0,\"dpCnt\":0,\"gpCnt\":0,\"jpCnt\":4,\"score\":52,\"scoreHorse\":0,\"sit\":3,\"winChips\":252,\"zmCnt\":4}],\"handCnt\":8,\"mid\":5,\"sid\":51};\r\n        // let data_2={\"calcInfos\":[{\"bankerHScore\":0,\"dpCnt\":9,\"gpCnt\":0,\"jpCnt\":0,\"score\":-182,\"scoreHorse\":0,\"sit\":0,\"winChips\":18,\"zmCnt\":1},{\"bankerHScore\":0,\"dpCnt\":1,\"gpCnt\":0,\"jpCnt\":7,\"score\":6,\"scoreHorse\":0,\"sit\":1,\"winChips\":206,\"zmCnt\":0},{\"bankerHScore\":0,\"dpCnt\":3,\"gpCnt\":0,\"jpCnt\":2,\"score\":124,\"scoreHorse\":0,\"sit\":2,\"winChips\":324,\"zmCnt\":6},{\"bankerHScore\":0,\"dpCnt\":0,\"gpCnt\":0,\"jpCnt\":4,\"score\":52,\"scoreHorse\":0,\"sit\":3,\"winChips\":252,\"zmCnt\":4},{\"bankerHScore\":0,\"dpCnt\":0,\"gpCnt\":0,\"jpCnt\":4,\"score\":52,\"scoreHorse\":0,\"sit\":3,\"winChips\":252,\"zmCnt\":4},{\"bankerHScore\":0,\"dpCnt\":0,\"gpCnt\":0,\"jpCnt\":4,\"score\":52,\"scoreHorse\":0,\"sit\":3,\"winChips\":252,\"zmCnt\":4}],\"handCnt\":8,\"mid\":5,\"sid\":51};\r\n        // let msg:Msg_SC_GameOverMsg=JSON.parse(JSON.stringify(data_2));\r\n\t\t// console.log(\"收到大结算数据: \",data,\"---msg\",msg);\r\n\t\t// gameOverData=msg;\r\n        if(!gameOverData){\r\n            Global.Utils.debugOutput(\"BigOverPanel:  \"+\"无大结算数据！！！\");\r\n            Global.EventCenter.addEventListener(EventType.GameOverMsg , this.start, this);\r\n            return;\r\n        }\r\n        this.viewType=gameOverData.calcInfos.length-4;\r\n        this.createChildNode();\r\n        let paramPlayerData:BigOverPlayerInfoItemData[]=[];\r\n        let paramHorseData:BigOverPlayerInfoItemData[]=[];\r\n        let playerDataArr:FinalPlayerCalcInfo[]=[];\r\n\r\n        let calcInfos=gameOverData.calcInfos;\r\n        for(let index=0;index<4;index++){\r\n            playerDataArr.push(calcInfos[index]);\r\n        }\r\n       \r\n        let dataSortArr=playerDataArr.sort(function(a,b){\r\n            return b.score-a.score;\r\n        })\r\n        for(let index=0;index<4;index++){\r\n            let dataItem=dataSortArr[index];\r\n            let infoItem=this.getInfoItemByData(dataItem,index);\r\n            paramPlayerData.push(infoItem);\r\n        }\r\n        for(let index=4;index<calcInfos.length;index++){\r\n            let dataItem=calcInfos[index];\r\n            let infoItem=this.getInfoItemByData(dataItem,index);\r\n            paramHorseData.push(infoItem) ;\r\n        }\r\n    \r\n        if(this.viewType>0){\r\n            this.contentNode.y=418.8;\r\n            this.downRulesLabel.node.y=-387;\r\n        }else{\r\n            this.contentNode.y=408.8;\r\n            this.downRulesLabel.node.y=-340;\r\n        }\r\n        this.initItemData(paramPlayerData,paramHorseData);\r\n        let roomInfo=GameInfo.ins.roomTableInfo;\r\n        this.initTopLabels(roomInfo,gameOverData);\r\n        let ruleStr=Global.Utils.getRoomTableInfoStr(roomInfo.rule);\r\n        this.downRulesLabel.string=ruleStr;\r\n    }\r\n\r\n    private getInfoItemByData(infoItem:FinalPlayerCalcInfo,index:number):BigOverPlayerInfoItemData{\r\n        let playerInfo=GameInfo.ins.getPlayerBySit(infoItem.sit);\r\n        let dataItem:BigOverPlayerInfoItemData={\r\n            type:this.viewType,\r\n            player_head_url:\"smallOver/resource/game_jstouxiang2\",\r\n            playr_rank_num:index+1,\r\n            player_rank_url:index>2?\"\":\"smallOver/resource/game_di\"+(index+1),\r\n            player_name:playerInfo?playerInfo.player.nike:\"\",\r\n            player_ID:playerInfo?playerInfo.player.aid.toString():\"\",\r\n            zimo_num:infoItem.zmCnt,\r\n            jiepao_num:infoItem.jpCnt,\r\n            gangpai_num:infoItem.gpCnt,\r\n            dianpao_num:infoItem.dpCnt,\r\n            player_score:infoItem.score+infoItem.bankerHScore,\r\n            duiju_num:infoItem.score,\r\n            zhuangma_num:infoItem.bankerHScore,\r\n\r\n            score_horse_num:infoItem.scoreHorse,\r\n            game_horse_url:index>=4?\"smallOver/resource/game_ma\"+(index-3):\"\",\r\n            card_num:index>=4?108:0,\r\n\r\n        };\r\n        if(index>=4){\r\n            dataItem.player_rank_url=\"\";\r\n        }\r\n        return dataItem;\r\n    }\r\n    private createChildNode():void{\r\n        for (let index = 0; index < 4; index++) {\r\n            let prefabItem = cc.instantiate(this.playerInfoItemPrefab);\r\n            if(this.viewType>0){\r\n                prefabItem.height = 145;\r\n            }else{\r\n                prefabItem.height=166;\r\n            }\r\n            this.contentNode.addChild(prefabItem);\r\n            this.playerInfoItemArr.push(prefabItem);\r\n        }\r\n        if(this.viewType>0){\r\n            let prefabItem=cc.instantiate(this.horsePlayerInfoItemPrfab);\r\n            this.horsePlayerInfoItem=prefabItem.getComponent(BigOverHorseInfoItem);\r\n            this.contentNode.addChild(prefabItem);\r\n        }\r\n    }\r\n    private initItemData(data:BigOverPlayerInfoItemData[],horseData:BigOverPlayerInfoItemData[]):void{\r\n        if(data.length!=this.playerInfoItemArr.length){\r\n            Global.Utils.debugOutput(\"BigOverPannel  初始化大结算数据长度不一致！！！\");\r\n            return;\r\n        }\r\n        for(let index=0;index<data.length;index++){\r\n            let dataItem=data[index];\r\n            let nodeItem=this.playerInfoItemArr[index];\r\n            let intemCompnent=nodeItem.getComponent(BigOverPlayerInfoItem);\r\n            intemCompnent.initValue(dataItem);\r\n        }\r\n        if(this.horsePlayerInfoItem){\r\n            this.horsePlayerInfoItem.node.active=this.viewType>0;\r\n            this.horsePlayerInfoItem.initValue(horseData);\r\n        }\r\n    }\r\n    private initTopLabels(roomData:RoomTableInfo,gameOverData:Msg_SC_GameOverMsg):void{\r\n        let gameName:string = Global.Utils.getGameNameByGameType(roomData.rule.gamePlayType);\r\n        let gameType:string = Global.Utils.getGameTypeNameByGameType(roomData.rule.roomType);\r\n        let roomName = gameName + \"-\"+ gameType;\r\n        this.roomTypeLabel.string=roomName;\r\n        this.roomNameLabel.string=roomData.roomName;\r\n        this.createNmeLabel.string=roomData.creater;\r\n        this.downScoreNumLabel.string=roomData.rule.baseScore+\"\";\r\n        this.sumBattleNumLabel.string=gameOverData.handCnt+\"/\"+roomData.rule.handsCnt;\r\n        let timeStr=new Date().toString().split(\"GMT\");\r\n        this.gameEndTimeLabel.string=timeStr[0];\r\n\r\n        let playerAgain=this.node.getChildByName(\"playagain_btn\");\r\n        let back_btn=this.node.getChildByName(\"back_btn\");\r\n        let isCreater=roomData.crtAid==UserInfo.ins.myInfo.aid;\r\n        playerAgain.active=isCreater;\r\n        if(!isCreater){\r\n            back_btn.x=0;\r\n        }\r\n    }\r\n    public onExitBtnClick():void{\r\n        Global.Utils.debugOutput(\"BigOverPanel  点击退出按钮\");\r\n        this.disTory();\r\n        Global.EventCenter.dispatchEvent(EventType.BackToLobby);\r\n    }\r\n    public onPlayAgainBtnClick():void{\r\n        Global.Utils.debugOutput(\"BigOverPanel  再来一次\");\r\n        let msg=new Msg_CS_TableInvite();\r\n        let gameRule=GameInfo.ins.roomTableInfo.rule;\r\n        msg.tid=\"\";//房间编号应该使用新创建的下一场的tid\r\n        let myInfo=UserInfo.ins.myInfo;\r\n        let palyers=GameInfo.ins.gamePlayers;\r\n        let objs=[];\r\n        for(let item of palyers){\r\n            if(item.player.aid!=myInfo.aid){\r\n                objs.push(item.player.gpid);\r\n            }\r\n        }\r\n        msg.objs=objs;\r\n        GameInfo.ins.creatGameInviteTempData_CS=msg;\r\n        this.creatRoom(gameRule);\r\n        this.disTory();\r\n    }\r\n    private creatRoom(_rule:TableRuleInfo):void{\r\n        let ruleInfo : TableRuleInfo = _rule;\r\n\t\tlet msg : Msg_CS_CreateTable = new Msg_CS_CreateTable();\r\n\t\tmsg.info = ruleInfo;\r\n\t\tmsg.name = UserInfo.ins.myInfo.nike;\r\n\t\tGlobal.mgr.socketMgr.send(-1 , msg);\r\n    }\r\n    disTory(): void {\r\n        this.removeListener();\r\n        this.contentNode.removeAllChildren();\r\n        super.disTory();\r\n    }\r\n    private removeListener():void{\r\n        Global.EventCenter.removeEventListener(EventType.GameOverMsg , this.start, this);\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}