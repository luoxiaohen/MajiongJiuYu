{"version":3,"sources":["assets\\Script\\Shared\\MessageCallback.ts"],"names":[],"mappings":";;;;;;AAAA;IAMI;QACI,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;IACvB,CAAC;IAND,sBAAkB,sBAAG;aAArB;YACI,OAAO,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,eAAe,EAAE,CAAC,CAAC;QAC5D,CAAC;;;OAAA;IAKD,qCAAW,GAAX,UAAY,KAAK,EAAE,OAAO;QACtB,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC;QAC5C,IAAI,CAAC,CAAC,QAAQ,EAAE;YACZ,IAAI,cAAc,GAAG,KAAK,CAAC;YAC3B,KAAK,IAAI,CAAC,IAAI,QAAQ,EAAE;gBACpB,IAAI,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK,OAAO,CAAC,EAAE;oBACzD,cAAc,GAAG,IAAI,CAAC;oBACtB,MAAM;iBACT;aACJ;YACD,IAAI,CAAC,cAAc,EAAE;gBACjB,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aAC1B;SACJ;aACI;YACD,QAAQ,GAAG,EAAE,CAAC;YACd,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACvB,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,QAAQ,CAAC;SACnC;IACL,CAAC;IAAA,CAAC;IAEF,wCAAc,GAAd,UAAe,KAAK,EAAE,OAAO;QACzB,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC;QAC5C,IAAI,CAAC,CAAC,QAAQ,EAAE;YACZ,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;gBACtC,IAAI,QAAQ,CAAC,CAAC,CAAC,KAAK,OAAO,EAAE;oBACzB,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;oBACtB,MAAM;iBACT;aACJ;SACJ;IACL,CAAC;IAAA,CAAC;IAEF,qCAAW,GAAX,UAAY,KAAK,EAAE,GAAQ;QAAR,oBAAA,EAAA,UAAQ;QACvB,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;QAC1C,IAAI,CAAC,CAAC,QAAQ,EAAE;YACZ,IAAI,YAAY,GAAG,QAAQ,CAAC,KAAK,EAAE,CAAC;YACpC,KAAK,IAAI,CAAC,IAAI,YAAY,EAAE;gBACxB,IAAI,YAAY,CAAC,cAAc,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,sBAAsB,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE;oBAC1G,YAAY,CAAC,CAAC,CAAC,CAAC,sBAAsB,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;iBACtD;aACJ;SACJ;IACL,CAAC;IAAA,CAAC;IACN,sBAAC;AAAD,CArDA,AAqDC,IAAA","file":"","sourceRoot":"/","sourcesContent":["export default class MessageCallback {\r\n    private static _ins: MessageCallback;\r\n    public static get ins() {\r\n        return this._ins || (this._ins = new MessageCallback());\r\n    }\r\n    handlers: any;\r\n    constructor() {\r\n        this.handlers = [];\r\n    }\r\n    addListener(route, handler) {\r\n        let handlers = this.handlers[route] || null;\r\n        if (!!handlers) {\r\n            let isHandlerExist = false;\r\n            for (var i in handlers) {\r\n                if (handlers.hasOwnProperty(i) && (handlers[i] === handler)) {\r\n                    isHandlerExist = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (!isHandlerExist) {\r\n                handlers.push(handler);\r\n            }\r\n        }\r\n        else {\r\n            handlers = [];\r\n            handlers.push(handler);\r\n            this.handlers[route] = handlers;\r\n        }\r\n    };\r\n\r\n    removeListener(route, handler) {\r\n        let handlers = this.handlers[route] || null;\r\n        if (!!handlers) {\r\n            for (var i = 0; i < handlers.length; ++i) {\r\n                if (handlers[i] === handler) {\r\n                    handlers.splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    emitMessage(route, msg=null) {\r\n        let handlers = this.handlers[route] || [];\r\n        if (!!handlers) {\r\n            let handlersTemp = handlers.slice();\r\n            for (var i in handlersTemp) {\r\n                if (handlersTemp.hasOwnProperty(i) && !!handlersTemp[i].messageCallbackHandler && !handlersTemp[i].isDestroy) {\r\n                    handlersTemp[i].messageCallbackHandler(route, msg);\r\n                }\r\n            }\r\n        }\r\n    };\r\n}"]}