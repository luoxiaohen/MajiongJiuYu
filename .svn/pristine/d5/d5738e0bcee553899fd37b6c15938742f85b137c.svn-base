{"version":3,"sources":["assets\\Script\\UI\\createRoom\\CreateRoomRulerPanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport EventType from \"../../event/EventType\";\r\nimport GameInfo from \"../../Game/info/GameInfo\";\r\nimport UserInfo from \"../../Game/info/UserInfo\";\r\nimport TimeAndMoveManager from \"../../mgr/TimeAndMoveManager\";\r\nimport { Msg_CS_ReqSaveRoomRuleTemplate, Msg_CS_CreateTable } from \"../../proto/LobbyMsg\";\r\nimport { TableRuleTempl, TableRuleInfo, GamePiaoTypeEnum, GamePlayTypeEnum, GameRoomTypeEnum } from \"../../proto/LobbyMsgDef\";\r\nimport { Global } from \"../../Shared/GloBal\";\r\nimport Utils from \"../../Shared/Utils\";\r\nimport UIBase from \"../../UIBase\";\r\nimport BaseRuleItem from \"./BaseRuleItem\";\r\nimport CreateRoomHelper, { GameOenRoomUseEnum } from \"./CreateRoomHelper\";\r\nimport CreateRoomRuleItem from \"./CreateRoomRuleItem\";\r\nimport FanRuleItem from \"./FanRuleItem\";\r\nimport FeaturesRuleItem from \"./FeaturesRuleItem\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class CreateRoomRulerPanel extends UIBase {\r\n    @property (cc.Button)\r\n    toSaveBtn : cc.Button = null;\r\n    @property (cc.ScrollView)\r\n    ruleScroller : cc.ScrollView = null;\r\n    @property (cc.Button)\r\n    saveBtn : cc.Button = null;\r\n    @property (cc.Button)\r\n    baginBtn : cc.Button = null;\r\n    @property (cc.Button)\r\n    changeBtn : cc.Button = null;\r\n    @property (cc.Label)\r\n    moreLabel : cc.Label = null;\r\n    @property (cc.Sprite)\r\n    backImage : cc.Sprite = null;\r\n    @property (cc.Node)\r\n    ruleItemGrtoup : cc.Node = null;\r\n    private callBack:Function;\r\n    private thisObj : any;\r\n\r\n\tprivate itemArray:Array<CreateRoomRuleItem> = [];\r\n\tprivate ruleInfo : TableRuleInfo;\r\n\tprivate ruleTemp : TableRuleTempl;\r\n\tprotected onLoad(): void {\r\n\t\t\r\n\t}\r\n\r\n\tsetData(callBack : Function , thisObj:any , ruleTemp : TableRuleTempl){\r\n\t\tthis.callBack = callBack;\r\n\t\tthis.thisObj = thisObj;\r\n\t\tthis.ruleTemp = ruleTemp;\r\n\t\tthis.ruleInfo = ruleTemp ? ruleTemp.rule : null;\r\n\t\tthis.createElements();\r\n\t}\r\n\r\n\tprivate createElements(){\r\n\t\tthis.createRuleItem();\r\n\t\tthis.addEvent();\r\n\t\tif(this.ruleInfo){\r\n\t\t\tthis.changeBtn.node.active = true;\r\n\t\t}else{\r\n\t\t\tthis.changeBtn.node.active = false;\r\n\t\t}\r\n\t}\r\n\tprivate addEvent(){\r\n\t\tGlobal.EventCenter.addEventListener(EventType.OpenRoomUseChange , this.onRoomOpenUseChange , this);\r\n\t\tGlobal.EventCenter.addEventListener(EventType.GameRuleItemMove , this.onMoveItem , this);\r\n\t\tGlobal.EventCenter.addEventListener(EventType.RuleMoveAndScrollerMove , this.onProMove , this);\r\n\t\tGlobal.EventCenter.addEventListener(EventType.RuleMoveAndScrollerMoveOver , this.onProMoveOver , this);\r\n\t}\r\n\tprivate onProMove(){\r\n\t\tthis.ruleScroller.vertical = false;\r\n\t}\r\n\tprivate onProMoveOver(){\r\n\t\tthis.ruleScroller.vertical = true;\r\n\t}\r\n\tprivate onMoveItem(e , data){\r\n\t\tlet item : CreateRoomRuleItem = data;\r\n\t\t\r\n\t\tlet itemWeights : number ; \r\n\t\tlet nowY:number;\r\n\r\n\t\tfor(let i = 0 ; i < this.itemArray.length ; i++){\r\n\t\t\titemWeights = this.itemArray[i].itemWeights;\r\n\t\t\tnowY = this.itemArray[i].node.y;\r\n\t\t\tif(itemWeights < item.itemWeights){\r\n\t\t\t\tif(item.isMoveUp){\r\n\t\t\t\tcc.tween(this.itemArray[i].node).to(item.changeHeight*TimeAndMoveManager.ins.gameRuleItemMoveTime , {y : nowY + item.changeHeight}).start();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcc.tween(this.itemArray[i].node).to(item.changeHeight*TimeAndMoveManager.ins.gameRuleItemMoveTime , {y : nowY - item.changeHeight}).start();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tprivate onRoomOpenUseChange(){\r\n\t\tlet use : number = this.getCreateUse();\r\n\t\tthis.moreLabel.string = \" \" + use + \"   现在开局\";\r\n\t\tif(UserInfo.ins.myInfo.gold >= use){\r\n\t\t\tthis.baginBtn.enabled = true;\r\n\t\t\tthis.moreLabel.node.color = CreateRoomHelper.ins.colorData[1];\r\n\t\t}else{\r\n\t\t\tthis.baginBtn.enabled = false;\r\n\t\t\tthis.moreLabel.node.color = CreateRoomHelper.ins.colorData[4];\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\tprivate getCreateUse():number{\r\n\t\tlet ruleInfo : TableRuleInfo = this.getCreateInfo();\r\n\t\treturn Global.Utils.getNeedByRule(ruleInfo);\r\n\t}\r\n\tprivate getCreateInfo():TableRuleInfo{\r\n\t\tlet ruleInfo : TableRuleInfo = new TableRuleInfo();\r\n\t\tlet tempInfo : TableRuleInfo;\r\n\t\tfor(let i = 0 ; i < this.itemArray.length ; i++){\r\n\t\t\ttempInfo = this.itemArray[i].getSelectData();\r\n\t\t\tfor(let key in tempInfo){\r\n\t\t\t\tif(tempInfo[key]){\r\n\t\t\t\t\truleInfo[key] = tempInfo[key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn ruleInfo;\r\n\t}\r\n\tprivate createRuleItem(){\r\n\t\tthis.clearElements();\r\n\t\tlet ruleInfo:TableRuleInfo = new TableRuleInfo();\r\n\t\truleInfo.gamePlayType = GamePlayTypeEnum.HuanSanZhang;\r\n\t\truleInfo.roomType = GameRoomTypeEnum.SanRenLiangFang;\r\n\t\truleInfo.baseScore = 100;\r\n\t\truleInfo.handsCnt = 16;\r\n\t\truleInfo.ceiling = 32;\r\n\t\truleInfo.tiFan = 4;\r\n\t\truleInfo.baozi = GamePiaoTypeEnum.ShuaiPiao;\r\n\t\truleInfo.baoziDouble = 1;\r\n\t\truleInfo.haveHorse = 1;\r\n\t\truleInfo.buyHorseNum = 2;\r\n\t\truleInfo.buyHorseType = 1;\r\n\t\truleInfo.isSelectBankerBuyHorse = 1;\r\n\t\truleInfo.isSelectEatHorse = 0;\r\n\r\n\t\truleInfo.zmType = 1;\r\n\t\truleInfo.menqing = 1;\r\n\t\truleInfo.zhongzhang = 1;\r\n\t\truleInfo.yao9 = 1;\r\n\t\truleInfo.jiangdui = 1;\r\n\t\truleInfo.jiaxin5 = 1;\r\n\t\truleInfo.tdHu = 1;\r\n\t\truleInfo.findMaxHu = 1;\r\n\t\truleInfo.dianGangHua = 1;\r\n\t\truleInfo.caGua = 1;\r\n\t\truleInfo.jiShiYu = 1;\r\n\t\truleInfo.allGangShift = 1;\r\n\t\truleInfo.sunshine = 1;\r\n\t\truleInfo.passHu = 1;\r\n\t\truleInfo.lunZhuang = 1;\r\n\t\truleInfo.hu2Score = 1;\r\n\t\truleInfo.last4Hu = 1;\r\n\t\truleInfo.zmOpen = 1;\r\n\t\truleInfo.realTimeCalc = 1;\r\n\t\truleInfo.limitIP = 1;\r\n\t\truleInfo.limitGPS = 1;\r\n\t\tif(this.ruleInfo){\r\n\t\t\truleInfo = this.ruleInfo;\r\n\t\t}else{\r\n\t\t\truleInfo = CreateRoomHelper.ins.myLastRuleInfo ? CreateRoomHelper.ins.myLastRuleInfo : null\r\n\t\t}\r\n\t\tlet temp : TableRuleTempl = new TableRuleTempl();\r\n\t\ttemp.name = \"我的测试\";\r\n\t\ttemp.rule = ruleInfo;\r\n\t\tlet item : CreateRoomRuleItem = cc.instantiate(Global.Utils.getPreFabBySource(\"createRoom/prefab/BaseRuleItem\")).getComponent(BaseRuleItem);\r\n\t\titem.setData(this.ruleTemp)\r\n\t\tthis.itemArray.push(item);\r\n\t\titem = cc.instantiate(Global.Utils.getPreFabBySource(\"createRoom/prefab/FeaturesRuleItem\")).getComponent(FeaturesRuleItem);\r\n\t\titem.setData(this.ruleTemp)\r\n\t\tthis.itemArray.push(item);\r\n\t\titem = cc.instantiate(Global.Utils.getPreFabBySource(\"createRoom/prefab/FanRuleItem\")).getComponent(FanRuleItem);\r\n\t\titem.setData(this.ruleTemp)\r\n\t\tthis.itemArray.push(item);\r\n\t\tlet _y:number=0;\r\n\t\tfor(let i = 0 ; i < this.itemArray.length ; i++){\r\n\t\t\tthis.ruleItemGrtoup.addChild(this.itemArray[i].node);\r\n\t\t\tthis.itemArray[i].node.y = _y*-1;\r\n\t\t\t_y += this.itemArray[i].getHeight();\r\n\t\t}\r\n\t}\r\n\tprivate clearElements(){\r\n\t\tfor(let i = 0 ; i < this.itemArray.length ; i++){\r\n\t\t\tthis.itemArray[i].disTory();\r\n\t\t}\r\n\t\tthis.itemArray = [];\r\n\t}\r\n\r\n    /**返回*/\r\n\t onBackClick(){\r\n\t\tthis.callBack.bind(this.thisObj)(1);\r\n\t}\r\n\t/**去保存*/\r\n\t onToSaveClick(){\r\n\t\tthis.callBack.bind(this.thisObj)(2);\r\n\t}\r\n\t/**修改保存*/\r\n\t onChangeClick(){\r\n\t\tlet temp:TableRuleTempl = new TableRuleTempl();\r\n\t\ttemp.rule = this.getCreateInfo();\r\n\t\ttemp.name = (this.itemArray[0] as BaseRuleItem).getRuleName();\r\n\t\ttemp.templId = this.ruleTemp.templId;\r\n\t\tlet msg : Msg_CS_ReqSaveRoomRuleTemplate = new Msg_CS_ReqSaveRoomRuleTemplate();\r\n\t\tmsg.ruleInfo =  temp;\r\n\t\tCreateRoomHelper.ins.lastSaveTemplate = msg.ruleInfo;\r\n\t\t Global.mgr.socketMgr.send(-1 , msg);\r\n        \r\n\t}\r\n\t/**保存*/\r\n\t onSaveClick(){\r\n\t\tlet temp:TableRuleTempl = new TableRuleTempl();\r\n\t\ttemp.rule = this.getCreateInfo();\r\n\t\ttemp.name = (this.itemArray[0] as BaseRuleItem).getRuleName();\r\n\t\tlet msg : Msg_CS_ReqSaveRoomRuleTemplate = new Msg_CS_ReqSaveRoomRuleTemplate();\r\n\t\tmsg.ruleInfo =  temp;\r\n\t\tCreateRoomHelper.ins.lastSaveTemplate = msg.ruleInfo;\r\n\t\t Global.mgr.socketMgr.send(-1 , msg);\r\n\t}\r\n\t/**开局*/\r\n\t onBeginClick(){\r\n\t\tlet ruleInfo : TableRuleInfo = this.getCreateInfo();\r\n\t\tlet msg : Msg_CS_CreateTable = new Msg_CS_CreateTable();\r\n\t\tmsg.info = ruleInfo;\r\n\t\tmsg.name = (this.itemArray[0] as BaseRuleItem).getRuleName();\r\n\t\t Global.mgr.socketMgr.send(-1 , msg);\r\n\t}\r\n\r\n\tdisTory(){\r\n\t\tsuper.disTory();\r\n\t}\r\n}\r\n"]}