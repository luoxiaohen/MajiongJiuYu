{"version":3,"sources":["assets\\Script\\UI\\over\\SmallOverPlayerHead.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport GameInfo from \"../../Game/info/GameInfo\";\r\nimport UserInfo from \"../../Game/info/UserInfo\";\r\nimport { GameResultInfo, SitInfo } from \"../../proto/TableMsgDef\";\r\nimport { Global } from \"../../Shared/GloBal\";\r\nimport UIBase from \"../../UIBase\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class SmallOverPlayerHead extends UIBase {\r\n    @property (cc.Sprite)\r\n    bgImag : cc.Sprite = null; \r\n    @property (cc.Sprite)\r\n    touxiangImage : cc.Sprite = null; \r\n    @property (cc.Sprite)\r\n    piaoImage : cc.Sprite = null; \r\n    @property (cc.Sprite)\r\n    zhuangImage : cc.Sprite = null; \r\n    @property (cc.Sprite)\r\n    horseImage1 : cc.Sprite = null; \r\n    @property (cc.Sprite)\r\n    horseImage2 : cc.Sprite = null; \r\n    @property (cc.Sprite)\r\n    huImage : cc.Sprite = null; \r\n    @property (cc.Label)\r\n    fenLabel : cc.Label = null; \r\n    @property (cc.Label)\r\n    nameLabel : cc.Label = null; \r\n\r\n    /**结算数据*/\r\n    private _esultInfo: GameResultInfo;\r\n    public get esultInfo(): GameResultInfo {\r\n        return this._esultInfo;\r\n    }\r\n    public set esultInfo(value: GameResultInfo) {\r\n        this._esultInfo = value;\r\n        this.showHorse();\r\n        this.showFenLabel();\r\n    }\r\n    /**玩家数据*/\r\n    private _playerInfo: SitInfo;\r\n    public get playerInfo(): SitInfo {\r\n        return this._playerInfo;\r\n    }\r\n    public set playerInfo(value: SitInfo) {\r\n        this._playerInfo = value;\r\n        this.showZhuangImage();\r\n        this.showNameLabel();\r\n    }\r\n    /**是否有胡*/\r\n    private _isBreak: boolean;\r\n    public get isBreak(): boolean {\r\n        return this._isBreak;\r\n    }\r\n    public set isBreak(value: boolean) {\r\n        this._isBreak = value;\r\n        this.showHuImage()\r\n    }\r\n    /**是否选中*/\r\n    private _isSelect: boolean;\r\n    public get isSelect(): boolean {\r\n        return this._isSelect;\r\n    }\r\n    public set isSelect(value: boolean) {\r\n        this._isSelect = value;\r\n        this.showBgImage();\r\n    }\r\n    protected onLoad(): void {\r\n        \r\n    }\r\n    setPlayerData (info : GameResultInfo , isBreak : boolean){\r\n        this.esultInfo = info;\r\n        this.isBreak = isBreak;\r\n        this.playerInfo = GameInfo.ins.getPlayerBySit(info.sitNum);\r\n    }\r\n    private getPointStr():string{\r\n        let changeNum : number = (this.esultInfo.sitNum - UserInfo.ins.mySitIndex + 40)%Global.Utils.getMaxPlayerByGameType(GameInfo.ins.roomTableInfo.rule.roomType) ;\r\n        switch(changeNum){\r\n            case 0:\r\n                return \"本家\";\r\n            case 1:\r\n                return \"下家\";\r\n            case 2:\r\n                return \"对家\";\r\n            case 3:\r\n                return \"上家\";\r\n        }\r\n        return \"\";\r\n    }\r\n    public showHorse(){\r\n\r\n    }\r\n    public showNameLabel(){\r\n        this.nameLabel.string = this.getPointStr() + this.playerInfo.player.nike\r\n    }\r\n    public showFenLabel(){\r\n        let fontSource:string = this.esultInfo.score >= 0 ? \"comResource/mapFont/jiesuanJiafen\" : \"comResource/mapFont/jiesuanJianfen\";\r\n        cc.loader.loadRes(fontSource , cc.Font , (error , assest)=>{\r\n            if(error){\r\n                return;\r\n            }\r\n            this.fenLabel.font = assest;\r\n            this.fenLabel.string = this.esultInfo.score >= 0 ? (\"+\" + this.esultInfo.score) : this.esultInfo.score.toString();\r\n        })\r\n    }\r\n    public showZhuangImage(){\r\n        this.zhuangImage.node.active = this.esultInfo.sitNum == GameInfo.ins.nowBookMakerSit;\r\n    }\r\n    public showPiaoImage(){\r\n\r\n    }\r\n    public showHuImage(){\r\n        if(this.isBreak){\r\n            this.huImage.node.active = false;\r\n            return;\r\n        }\r\n        if(this.esultInfo.state != 2){\r\n            this.huImage.node.active = false;\r\n            return;\r\n        }\r\n        this.huImage.node.active = true;\r\n        let source : string = \"smallOver/resource/game_hu\";\r\n        if(this.esultInfo.huNum == 0){\r\n            source = \"smallOver/resource/game_hu\";\r\n        }\r\n        if(this.esultInfo.huNum == 1){\r\n            source = \"smallOver/resource/game_hu2\";\r\n        }\r\n        if(this.esultInfo.huNum == 2){\r\n            source = \"smallOver/resource/game_hu3\";\r\n        }\r\n        Global.Utils.setNewImageToSprite(this.huImage , source);\r\n    }\r\n    public showBgImage(){\r\n        let source : string = this.isSelect ? \"smallOver/resource/game_kuang1\" : \"smallOver/resource/game_kuang2\";\r\n        Global.Utils.setNewImageToSprite(this.bgImag , source);\r\n    }\r\n\r\n\r\n}\r\n"]}