{"version":3,"sources":["assets\\Script\\UI\\card\\HandCardPanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport { CardGroupPointBySelfEnum, EatCardEnum } from \"../../enum/EnumManager\";\r\nimport GameInfo from \"../../Game/info/GameInfo\";\r\nimport UserInfo from \"../../Game/info/UserInfo\";\r\nimport TimeAndMoveManager from \"../../mgr/TimeAndMoveManager\";\r\nimport { Msg_SC_Change3Maj, Msg_SC_GangSelfMsg, Msg_SC_HuMajMsg, Msg_SC_PengMajMsg } from \"../../proto/TableMsg\";\r\nimport { Global } from \"../../Shared/GloBal\";\r\nimport Utils from \"../../Shared/Utils\";\r\nimport UIBase from \"../../UIBase\";\r\nimport { PengGangData } from \"../../utils/InterfaceHelp\";\r\nimport MajiongEatItem from \"./MajiongEatItem\";\r\nimport MajiongHandCard from \"./MajiongHandCard\";\r\nimport MajiongOutCard from \"./MajiongOutCard\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class HandCardPanel extends UIBase {\r\n    @property (cc.Sprite)\r\n    actionImage : cc.Sprite = null;\r\n    \r\n\tprotected huCard : MajiongOutCard;\r\n\r\n    /**当前牌组属于那个位置*/\r\n    private _sitIndex: number = 0;\r\n    public get sitIndex(): number {\r\n        return this._sitIndex;\r\n    }\r\n    public set sitIndex(value: number) {\r\n        this._sitIndex = value;\r\n    }\r\n    /***摸牌得距离间隔*/\r\n    public feelCardChange: Array<number> = [50 , 22 , 30 , 22];\r\n\r\n    /***当前牌组相对于第一视角属于那个位置*/\r\n    private _bySelfPoint: CardGroupPointBySelfEnum = CardGroupPointBySelfEnum.Self;\r\n    public get bySelfPoint(): CardGroupPointBySelfEnum {\r\n        return this._bySelfPoint;\r\n    }\r\n    public set bySelfPoint(value: CardGroupPointBySelfEnum) {\r\n        this._bySelfPoint = value;\r\n    }\r\n    /**当前所有玩家出牌*/\r\n    private _allPlayerOut: Array<MajiongOutCard> = [];\r\n    public get allPlayerOut(): Array<MajiongOutCard> {\r\n        return this._allPlayerOut;\r\n    }\r\n    public set allPlayerOut(value: Array<MajiongOutCard>) {\r\n        this._allPlayerOut = value;\r\n    }\r\n\r\n    /**当前我自己的出牌*/\r\n    private _myOutArray: Array<MajiongOutCard> = [];\r\n    public get myOutArray(): Array<MajiongOutCard> {\r\n        return this._myOutArray;\r\n    }\r\n    public set myOutArray(value: Array<MajiongOutCard>) {\r\n        this._myOutArray = value;\r\n    }\r\n\r\n    /***我得碰杠牌数据*/\r\n    private _myPenggangArr: Array<MajiongEatItem> = [];\r\n    public get myPenggangArr(): Array<MajiongEatItem> {\r\n        return this._myPenggangArr;\r\n    }\r\n    public set myPenggangArr(value: Array<MajiongEatItem>) {\r\n        this._myPenggangArr = value;\r\n    }\r\n\r\n    /**手牌数组*/\r\n    private _handItemArr: Array<MajiongHandCard> = [];\r\n    public get handItemArr(): Array<MajiongHandCard> {\r\n        return this._handItemArr;\r\n    }\r\n    public set handItemArr(value: Array<MajiongHandCard>) {\r\n        this._handItemArr = value;\r\n    }\r\n\r\n    /**出牌布局*/\r\n    public outCardRowArr:Array<number> = [5,7,9,11];\r\n\r\n    /**碰杠组*/\r\n    public majiongEatPrefab : cc.Prefab = null;\r\n    protected onLoad(): void {\r\n        if(this.majiongEatPrefab == null){\r\n            this.majiongEatPrefab = Global.Utils.getPreFabBySource(\"majiongCard/prefab/MajiongEatItem\");\r\n        }\r\n        this.actionImage.node.active = false;\r\n    }\r\n\r\n    /***我的手牌数量*/\r\n    private _myHandLen: number = 0;\r\n    public get myHandLen(): number {\r\n        return this._myHandLen;\r\n    }\r\n    public set myHandLen(value: number) {\r\n        this._myHandLen = value;\r\n    }\r\n\r\n    public clearHandItemArr(){\r\n        for(let i = 0 ; i < this.handItemArr.length ; i++){\r\n            this.handItemArr[i].disTory();\r\n        }\r\n        this.handItemArr = [];\r\n    }\r\n    /**我的最后一张出牌*/\r\n    private _lastOutCard: MajiongOutCard;\r\n    public get lastOutCard(): MajiongOutCard {\r\n        return this._lastOutCard;\r\n    }\r\n    public set lastOutCard(value: MajiongOutCard) {\r\n        this._lastOutCard = value;\r\n    }\r\n    /***碰杠胡图片动画是否进行中*/\r\n    private isAction:boolean = false;\r\n    /***初始化手牌*/\r\n    initHandData(){\r\n        this.clearHandItemArr();\r\n        if(UserInfo.ins.selfIsLookPlayer){\r\n            this.bySelfPoint = CardGroupPointBySelfEnum.Self;\r\n        }\r\n    }\r\n\r\n    private changeThreeArr:Array<MajiongHandCard> = [];\r\n    /**\r\n     * 展示换三状态\r\n     * **/\r\n     showOnChangeThree(msg:Msg_SC_Change3Maj){\r\n        this.changeThreeArr = [];\r\n        if(this.bySelfPoint>0){\r\n            let hand:MajiongHandCard;\r\n            for(let i = 0 ; i < 3 ; i++){\r\n                hand = this.getLastHand();\r\n                hand.isShow = false;\r\n                this.changeThreeArr.push(hand);\r\n            }\r\n        }\r\n     }\r\n    showEndChangeThree(){\r\n        if(this.bySelfPoint > 0){\r\n            for(let i = 0 ; i < this.changeThreeArr.length ; i++){\r\n                this.changeThreeArr[i].isShow = true;\r\n            }\r\n        }\r\n     }\r\n    /***展示摸牌获取手牌*/\r\n    showGetHnads(getNum:number){\r\n        this.myHandLen+=getNum;\r\n    }\r\n    /***展示摸一张新牌*/ \r\n    showFeelWall(cardValue : number = null){\r\n        this.myHandLen++;\r\n        let newHand : MajiongHandCard = this.getNewHand();\r\n        let lastHand : MajiongHandCard = this.getLastHand();\r\n        switch(this.bySelfPoint){\r\n            case 0:\r\n                if(UserInfo.ins.selfIsLookPlayer){\r\n                    newHand.node.x = lastHand.node.x + lastHand.cardSize._w + this.feelCardChange[this.bySelfPoint];\r\n                    newHand.node.y = 0;\r\n                    newHand.isFeel = true;\r\n                    newHand.isShow = true;\r\n                }\r\n            break;\r\n            case 1:\r\n                newHand.node.x = lastHand.node.x - 2;\r\n                newHand.node.y = lastHand.node.y + 38 + this.feelCardChange[this.bySelfPoint];\r\n                newHand.isFeel = true;\r\n                newHand.isShow = true;\r\n                this.handItemArr.sort(Global.Utils.compareY);\r\n                for(let i = 0 ; i < this.handItemArr.length ; i++){\r\n                    this.handItemArr[i].node.zIndex = i;\r\n                }\r\n                break;\r\n            case 2:\r\n                newHand.node.x = lastHand.node.x - lastHand.cardSize._w - this.feelCardChange[this.bySelfPoint];\r\n                newHand.node.y = 0;\r\n                newHand.isFeel = true;\r\n                newHand.isShow = true;\r\n                break;\r\n            case 3:\r\n                newHand.node.x = lastHand.node.x - 2;\r\n                newHand.node.y = lastHand.node.y - 38 - this.feelCardChange[this.bySelfPoint];\r\n                newHand.isFeel = true;\r\n                newHand.isShow = true;\r\n                this.handItemArr.sort(Global.Utils.compareY);\r\n                for(let i = 0 ; i < this.handItemArr.length ; i++){\r\n                    this.handItemArr[i].node.zIndex = i;\r\n                }\r\n                break;\r\n        }\r\n    }\r\n    /**get last by point 0*/\r\n    public getSelfLastHand():MajiongHandCard{\r\n        let lastX:number = 0;\r\n        let lastItem : MajiongHandCard;\r\n        for(let i = 0 ; i < this.handItemArr.length ; i++){\r\n            if(this.handItemArr[i].isShow && this.handItemArr[i].node.x > lastX){\r\n                lastX = this.handItemArr[i].node.x;\r\n                lastItem = this.handItemArr[i];\r\n            }\r\n        }\r\n        return lastItem;\r\n    }\r\n    /***获取当前展示得最后一张手牌,根据位置不同,最后一张手牌也不同*/\r\n    protected getLastHand():MajiongHandCard{\r\n        let lastHand : MajiongHandCard = null;\r\n        let tempHand : MajiongHandCard ;\r\n        for(let i = 0 ; i < this.handItemArr.length ; i++){\r\n            tempHand = this.handItemArr[i];\r\n            if(tempHand.isShow){\r\n                if(lastHand == null){\r\n                    lastHand = tempHand\r\n                }else{\r\n                    if(this.bySelfPoint == 0){\r\n                        if(UserInfo.ins.selfIsLookPlayer){\r\n                            if(tempHand.node.x > lastHand.node.x){\r\n                                lastHand = tempHand;\r\n                            }\r\n                        }\r\n                    }else  if(this.bySelfPoint == 1){\r\n                        if(tempHand.node.y > lastHand.node.y){\r\n                            lastHand = tempHand;\r\n                        }\r\n                    }else if(this.bySelfPoint == 2){\r\n                        if(tempHand.node.x < lastHand.node.x){\r\n                            lastHand = tempHand;\r\n                        }\r\n                    }else if(this.bySelfPoint == 3){\r\n                        if(tempHand.node.y < lastHand.node.y){\r\n                            lastHand = tempHand;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if(this.bySelfPoint || UserInfo.ins.selfIsLookPlayer){\r\n            return lastHand;\r\n        }\r\n    }\r\n    /***获取一张藏起来得手牌*/\r\n    protected getNewHand():MajiongHandCard{\r\n        for(let i = 0 ; i < this.handItemArr.length ; i++){\r\n            if(this.handItemArr[i].isShow == false){\r\n                return this.handItemArr[i];\r\n            }\r\n        }\r\n    }\r\n    /***展示定缺结束*/\r\n    showDingQueed(){\r\n        \r\n    }\r\n    /**展示出牌*/\r\n    showOutCard(value:number){\r\n        this.createOutCard(value);\r\n        this.myHandLen--;\r\n        let movePoint:cc.Vec2 = cc.v2(this.lastOutCard.node.x , this.lastOutCard.node.y);\r\n        let outItem : MajiongHandCard ;\r\n        while(true){\r\n            let mathOne:number = Math.floor(Math.random()*this.handItemArr.length);\r\n            if(this.handItemArr[mathOne].isShow){\r\n                outItem = this.handItemArr[mathOne];\r\n                outItem.isFeel = false;\r\n                outItem.isShow = false;\r\n                this.changeMoveMyHand(outItem);\r\n                this.lastOutCard.node.x = outItem.node.x;\r\n                this.lastOutCard.node.y = outItem.node.y;\r\n                cc.tween(this.lastOutCard.node).to(TimeAndMoveManager.ins.otherOutCardToGroupTime , {x : movePoint.x, y : movePoint.y }).start();\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    /**创建一张出牌*/\r\n    createOutCard(value:number){\r\n        \r\n    }\r\n    /***出牌移动*/\r\n    changeMoveMyHand(outItem : MajiongHandCard){\r\n        let handItem:MajiongHandCard;\r\n        let changePoint:cc.Vec2 = cc.v2(0,0);\r\n        for(let i = 0 ; i < this.handItemArr.length ; i++){\r\n            handItem = this.handItemArr[i];\r\n            if(handItem.isShow){\r\n                changePoint = this.getChangePoint(handItem , outItem);\r\n                if(this.bySelfPoint == 2){\r\n                    if(changePoint){\r\n                        if(handItem.node.x < outItem.node.x){\r\n                            cc.tween(handItem.node).to(TimeAndMoveManager.ins.outCardHandMoveTime , {x : changePoint.x , y: changePoint.y }).call(()=>{\r\n                                for(let i = 0 ; i < this.handItemArr.length ; i++){\r\n                                    this.handItemArr[i].isFeel = false;\r\n                                }\r\n                            }).start()\r\n                        }\r\n                    }\r\n                }else{\r\n                    if(changePoint){\r\n                        cc.tween(handItem.node).to(TimeAndMoveManager.ins.outCardHandMoveTime , {x : changePoint.x , y: changePoint.y }).call(()=>{\r\n                            for(let i = 0 ; i < this.handItemArr.length ; i++){\r\n                                this.handItemArr[i].isFeel = false;\r\n                            }\r\n                        }).start()\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /***获取出牌位置偏移*/\r\n    getChangePoint(handItem:MajiongHandCard , outItem:MajiongHandCard):cc.Vec2{\r\n        let point:cc.Vec2 = cc.v2(0,0);\r\n        if(this.bySelfPoint == 0 ){\r\n            if(UserInfo.ins.selfIsLookPlayer){\r\n                if(handItem.node.x > outItem.node.x){\r\n                    point.x = handItem.node.x - handItem.cardSize._w;\r\n                    point.y = handItem.node.y;\r\n                    if(handItem.isFeel){\r\n                        point.x -= this.feelCardChange[this.bySelfPoint]\r\n                    }\r\n                    return point;\r\n                }\r\n            }\r\n        } else if(this.bySelfPoint == 1){\r\n            if(handItem.node.y > outItem.node.y){\r\n                point.x = handItem.node.x + 2/2;\r\n                point.y = handItem.node.y - 38/2;\r\n                if(handItem.isFeel){\r\n                    point.y -= (this.feelCardChange[this.bySelfPoint])\r\n                }\r\n                return point;\r\n            }else{\r\n                point.x = handItem.node.x - 2/2;\r\n                point.y = handItem.node.y + 38/2;\r\n                if(handItem.isFeel){\r\n                    point.y += (this.feelCardChange[this.bySelfPoint])\r\n                }\r\n                return point;\r\n            }\r\n        }else if(this.bySelfPoint == 2){\r\n            if(handItem.node.x < outItem.node.x){\r\n                point.x = handItem.node.x + handItem.cardSize._w;\r\n                point.y = handItem.node.y;\r\n                if(handItem.isFeel){\r\n                    point.x += this.feelCardChange[this.bySelfPoint]\r\n                }\r\n                return point;\r\n            }\r\n        }else if(this.bySelfPoint == 3){\r\n            if(handItem.node.y < outItem.node.y){\r\n                point.x = handItem.node.x + 2/2;\r\n                point.y = handItem.node.y + 38/2;\r\n                if(handItem.isFeel){\r\n                    point.y += (this.feelCardChange[this.bySelfPoint])\r\n                }\r\n                return point;\r\n            }else{\r\n                point.x = handItem.node.x - 2/2;\r\n                point.y = handItem.node.y - 38/2;\r\n                if(handItem.isFeel){\r\n                    point.y -= (this.feelCardChange[this.bySelfPoint])\r\n                }\r\n                return point;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    /**获取当前处在第几列*/\r\n    getOutRow():number{\r\n        let len:number = this.myOutArray.length;\r\n        if(len < 5){\r\n            return 0;\r\n        }\r\n        if(len < 12){\r\n            return 1;\r\n        }\r\n        if(len < 21){\r\n            return 2;\r\n        }\r\n        return 3;\r\n    }\r\n    /**获取基础偏移基数*/\r\n    getBaseNum():number{\r\n        let num:number = 0;\r\n        for(let i = 0 ; i < this.getOutRow() ; i++){\r\n            num += this.outCardRowArr[i];\r\n        }\r\n        return num;\r\n    }\r\n\r\n    /**获取我有多少牌是在展示得*/\r\n    getMyShowNum():number{\r\n        let index : number = 0 ;\r\n        for(let i = 0 ; i < this.handItemArr.length ; i++){\r\n            if(this.handItemArr[i].isShow){\r\n                index++;\r\n            }\r\n        }\r\n        return index;\r\n    }\r\n    /**我出了一张牌\r\n     * 这时候需要添加一张到数据中\r\n    */\r\n    onMyOutChangeData(maj:MajiongOutCard){\r\n        this.allPlayerOut.push(maj);\r\n        this.myOutArray.push(maj);\r\n    }\r\n    /***当我出牌被别人碰杠胡时候，\r\n     * 我需要收回这张牌\r\n    */\r\n    onMyOutBeEat(){\r\n\r\n    }\r\n    disTory(){\r\n        super.disTory()\r\n    }\r\n    /**展示暗杠*/\r\n    showSelfGang(msg:Msg_SC_GangSelfMsg){\r\n        this.showActionImage(\"comResource/font/game_gang2\");\r\n        if(this.bySelfPoint == 0 && UserInfo.ins.selfIsLookPlayer != true){\r\n            return;\r\n        }\r\n        if(msg.isPapo == 0){\r\n\t\t\tthis.onCreateEat(msg.majID , EatCardEnum.CrossSelf);\r\n\t\t}else{\r\n            this.myHandLen--;\r\n\t\t\tthis.changCreateEat(msg.majID,this.haveEatType(1 , msg.majID));\r\n\t\t}\r\n    }\r\n    /**展示碰杠*/\r\n    showPengGang(msg:Msg_SC_PengMajMsg){\r\n        let source:string = msg.isGang == 1 ?  \"comResource/font/game_gang2\" : \"comResource/font/game_peng2\";\r\n        this.showActionImage(source);\r\n        if(this.bySelfPoint == 0 && UserInfo.ins.selfIsLookPlayer != true){\r\n            return;\r\n        }\r\n        let eatType : EatCardEnum = Global.Utils.getOutType(msg.isGang , msg.fromSiteNum , msg.pengSiteNum , this.isHaveEat(msg.isGang , msg.majID) , this.haveEatType(msg.isGang , msg.majID));\r\n        if(eatType == EatCardEnum.CrossAllUp || eatType == EatCardEnum.CrossAllDown || eatType == EatCardEnum.CrossAllOpp){\r\n            this.myHandLen--;\r\n\t\t\tthis.changCreateEat(msg.majID,eatType);\r\n\t\t}else{\r\n\t\t\tthis.onCreateEat(msg.majID , eatType);\r\n\t\t}\r\n    }\r\n    /**展示胡牌*/\r\n    showHupai(msg: Msg_SC_HuMajMsg): void {\r\n        let card : MajiongHandCard;\r\n\t\tfor(let i = 0 ; i < this.handItemArr.length ; i++){\r\n\t\t\tcard = this.handItemArr[i];\r\n\t\t\tcard.isOutTing = false;\r\n\t\t}\r\n\t\tif(this.huCard && this.huCard.node.parent){\r\n\t\t\tthis.huCard.disTory()\r\n            this.huCard = null;\r\n\t\t}\r\n        let isShow:boolean = false;\r\n        if(msg.zmType == 1 || msg.zmType == 2){\r\n            for(let i = 0 ; i < this.handItemArr.length ; i++){\r\n                if(this.handItemArr[i].isFeel && this.handItemArr[i].isShow){\r\n                    isShow = true;\r\n                    this.huCard = cc.instantiate(Global.Utils.getPreFabBySource(\"majiongCard/prefab/MajiongOutCard\")).getComponent(MajiongOutCard);\r\n                    this.huCard.bySelfPoint = this.bySelfPoint;\r\n                    this.huCard.cardValue = msg.majID ? msg.majID : GameInfo.ins.otherLastCard;\r\n                    this.huCard.node.x = this.handItemArr[i].node.x;\r\n                    this.huCard.node.y = this.handItemArr[i].node.y;\r\n                    this.handItemArr[i].disTory();\r\n                    this.node.addChild(this.huCard.node);\r\n                }\r\n            }\r\n        }\r\n        if(!isShow){\r\n            let hand:MajiongHandCard = this.getLastHand();\r\n            if(this.bySelfPoint == 0){\r\n                hand = this.getSelfLastHand();\r\n            }\r\n            this.huCard = cc.instantiate(Global.Utils.getPreFabBySource(\"majiongCard/prefab/MajiongOutCard\")).getComponent(MajiongOutCard);\r\n            this.huCard.bySelfPoint = this.bySelfPoint;\r\n            this.huCard.cardValue = msg.majID ? msg.majID : GameInfo.ins.otherLastCard;\r\n            this.huCard.node.x = this.getHuY(hand).x;\r\n            this.huCard.node.y = this.getHuY(hand).y;\r\n            this.node.addChild(this.huCard.node);\r\n        }\r\n        let source:string = this.getHuImageSource(msg);\r\n        this.showActionImage(source,false);//\"comResource/font/game_\"+GameInfo.ins.hupaiArr.length+\"hu\"\r\n    }\r\n    private getHuImageSource(msg:Msg_SC_HuMajMsg):string{\r\n        let source:string = \"\";\r\n        let index:number = msg.huCnt;\r\n        let huStr:string = \"hu\";\r\n        if(msg.zmType == 0){\r\n            huStr = \"hu\";\r\n        }else if(msg.zmType == 1){\r\n            huStr = \"zimo\";\r\n        }else if(msg.zmType == 2){\r\n            huStr = \"gangshanghua\";\r\n        }else if(msg.zmType == 3){\r\n            huStr = \"jgangshanghua\";\r\n        }else if(msg.zmType == 4){\r\n            huStr = \"qiangganghu\";\r\n        }\r\n        source = \"comResource/font/game_\"+index+huStr\r\n        return source;\r\n    }\r\n    private getHuY(hand : MajiongHandCard):cc.Vec2{\r\n        let v2 : cc.Vec2 = cc.v2(0 , 0)\r\n        if(this.bySelfPoint == 0){\r\n            return cc.v2(hand.node.x + hand.cardSize._w + this.feelCardChange[this.bySelfPoint] , 0);\r\n        }\r\n        if(this.bySelfPoint == 1){\r\n            return cc.v2(hand.node.x + 2 , hand.node.y + 38 + this.feelCardChange[this.bySelfPoint] + 20)\r\n        }\r\n        if(this.bySelfPoint == 2){\r\n            return cc.v2(hand.node.x - hand.cardSize._w - this.feelCardChange[this.bySelfPoint] , 0)\r\n        }\r\n        if(this.bySelfPoint == 3){\r\n            return cc.v2(hand.node.x - 2 , hand.node.y - 38 - this.feelCardChange[this.bySelfPoint])\r\n        }\r\n    }\r\n    /**展示点炮*/\r\n    showDianPao (huCut : number){\r\n\r\n    }\r\n    /**补杠*/\r\n    private changCreateEat(card : number , eatType : EatCardEnum){\r\n\t\tif(eatType == EatCardEnum.EatDown){\r\n\t\t\teatType = EatCardEnum.CrossAllDown;\r\n\t\t}\r\n\t\tif(eatType == EatCardEnum.EatOpposite){\r\n\t\t\teatType = EatCardEnum.CrossAllOpp;\r\n\t\t}\r\n\t\tif(eatType == EatCardEnum.EatUp){\r\n\t\t\teatType = EatCardEnum.CrossAllUp;\r\n\t\t}\r\n\t\tfor(let i = 0 ; i < this.myPenggangArr.length ; i++){\r\n\t\t\tif(this.myPenggangArr[i].eatData.cardValue == card){\r\n\t\t\t\tthis.myPenggangArr[i].setNewData(eatType);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n    /***展示碰杠*/\r\n    private onCreateEat(cardValue : number , eatType : EatCardEnum){\r\n        this.removePenggang(cardValue , eatType , ()=>{\r\n            let removeNum : number = this.getRemoveNum(eatType);\r\n            let penggangData : PengGangData = new PengGangData();\r\n            penggangData.cardValue = cardValue;\r\n            penggangData.eatType = eatType;\r\n            penggangData.havePointBySelf = this.bySelfPoint;\r\n            let item : MajiongEatItem = cc.instantiate(this.majiongEatPrefab).getComponent(MajiongEatItem);\r\n            this.myPenggangArr.push(item);\r\n            item.eatData = penggangData;\r\n            item.setPoint(this.myPenggangArr.length);\r\n            this.node.addChild(item.node);\r\n            let changePoingt : cc.Vec2 = cc.v2(0 , 0);\r\n            if(this.bySelfPoint == 0 && UserInfo.ins.selfIsLookPlayer){\r\n                changePoingt.x = item.size.x + item.eatSplc[penggangData.havePointBySelf];\r\n                changePoingt.y = 0;\r\n            }\r\n            else if(this.bySelfPoint == 1){\r\n                changePoingt.x = 0;\r\n                changePoingt.y = removeNum*38/2\r\n            }\r\n            else if(this.bySelfPoint == 2){\r\n                changePoingt.x = 750 - this.myPenggangArr.length * (item.size.x + item.eatSplc[penggangData.havePointBySelf])\r\n                changePoingt.y = 0;\r\n            }\r\n            else if(this.bySelfPoint == 3){\r\n                changePoingt.x = 0;\r\n                changePoingt.y = removeNum*38/2\r\n            }\r\n            let moveItem : MajiongHandCard;\r\n            let movePoint : cc.Vec2 = cc.v2(0,0)\r\n            if(this.bySelfPoint == 2){\r\n                let moveIndex:number=0;\r\n                for(let i = 0 ; i < this.handItemArr.length ; i++){\r\n                    moveItem = this.handItemArr[i];\r\n                    if(moveItem.isShow){\r\n                        moveItem.node.x = changePoingt.x - moveIndex*moveItem.cardSize._w;\r\n                        if(moveItem.isFeel){\r\n                            moveItem.node.x -= this.feelCardChange[this.bySelfPoint];\r\n                        }\r\n                        moveIndex++;\r\n                    }\r\n                }\r\n                \r\n            }else{\r\n                for(let i = 0 ; i < this.handItemArr.length ; i++){\r\n                    moveItem = this.handItemArr[i];\r\n                    if(moveItem.isShow){\r\n                        if(this.bySelfPoint == 0 && UserInfo.ins.selfIsLookPlayer){\r\n                            movePoint.x = moveItem.node.x + changePoingt.x;\r\n                            movePoint.y = 0;\r\n                        }\r\n                        else if(this.bySelfPoint == 1){\r\n                            movePoint.x = moveItem.node.x;\r\n                            movePoint.y = moveItem.node.y + changePoingt.y;\r\n                            moveItem.node.zIndex = 49-i;\r\n                        }\r\n                        else if(this.bySelfPoint == 3){\r\n                            movePoint.x = moveItem.node.x;\r\n                            movePoint.y = moveItem.node.y + changePoingt.y;\r\n                        }\r\n                    }\r\n                    cc.tween(moveItem.node).to(TimeAndMoveManager.ins.outCardHandMoveTime , {x : movePoint.x , y : movePoint.y}).start();\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n    /**移除手牌中的碰杠牌*/\r\n    private removePenggang(cardValue : number , eatType : EatCardEnum , fun){\r\n        let removeNum:number = this.getRemoveNum(eatType);\r\n        this.myHandLen -= removeNum;\r\n        let moveItem : MajiongHandCard;\r\n        for(let i = 0 ; i < this.handItemArr.length ; i++){\r\n            this.handItemArr[i].isFeel = false;\r\n            this.handItemArr[i].isShow = false;\r\n        }\r\n        for(let i = 0 ; i < this.myHandLen ; i++){\r\n            moveItem = this.handItemArr[i];\r\n            if(this.bySelfPoint == 0 && UserInfo.ins.selfIsLookPlayer){\r\n                moveItem.node.x = i*moveItem.cardSize._w;\r\n            }\r\n            else if(this.bySelfPoint == 1){\r\n                moveItem.node.x = i*-2;\r\n                moveItem.node.y = i*38;\r\n            }\r\n            else if(this.bySelfPoint == 2){\r\n                moveItem.node.x = 819 - i*moveItem.cardSize._w;\r\n            }\r\n            else if(this.bySelfPoint == 3){\r\n                moveItem.node.x = i*2 - moveItem.cardSize._w;\r\n                moveItem.node.y = i*38;\r\n                moveItem.node.zIndex = this.myHandLen - i;\r\n            }\r\n            moveItem.isShow = true;\r\n        }\r\n        let lastItem : MajiongHandCard = null;\r\n        let nowItem : MajiongHandCard;\r\n        for(let i = 0 ; i < this.handItemArr.length ; i++){\r\n            nowItem = this.handItemArr[i];\r\n            nowItem.isFeel = false;\r\n            if(nowItem.isShow){\r\n                if(lastItem){\r\n                    if(this.bySelfPoint == 0 && UserInfo.ins.selfIsLookPlayer){\r\n                        if(nowItem.node.x > lastItem.node.x){\r\n                            lastItem = nowItem;\r\n                        }\r\n                    }\r\n                    else if(this.bySelfPoint == 1){\r\n                        if(nowItem.node.y > lastItem.node.y){\r\n                            lastItem = nowItem;\r\n                        }\r\n                    }\r\n                    else if(this.bySelfPoint == 2){\r\n                        if(nowItem.node.x < lastItem.node.x){\r\n                            lastItem = nowItem;\r\n                        }\r\n                    }\r\n                    else if(this.bySelfPoint == 3){\r\n                        if(nowItem.node.y < lastItem.node.y){\r\n                            lastItem = nowItem;\r\n                        }\r\n                    }\r\n                }else{\r\n                    lastItem = nowItem;\r\n                }\r\n            }\r\n        }\r\n        if(eatType < EatCardEnum.CrossOpposite ){\r\n            if(this.bySelfPoint == 0 && UserInfo.ins.selfIsLookPlayer ){\r\n                lastItem.node.x += this.feelCardChange[this.bySelfPoint]\r\n            }\r\n            else if(this.bySelfPoint == 1){\r\n                lastItem.node.y+=this.feelCardChange[this.bySelfPoint]\r\n            }\r\n            else if(this.bySelfPoint == 2){\r\n                lastItem.node.x-=this.feelCardChange[this.bySelfPoint]\r\n            }\r\n            else if(this.bySelfPoint == 3){\r\n                lastItem.node.y-=this.feelCardChange[this.bySelfPoint]\r\n            }\r\n            lastItem.isFeel = true;\r\n        }\r\n        fun();\r\n    }\r\n    public getRemoveNum(type:EatCardEnum):number{\r\n\t\tif(type <= EatCardEnum.EatDown){\r\n\t\t\treturn 2;\r\n\t\t}\r\n\t\tif(type <= EatCardEnum.CrossDown){\r\n\t\t\treturn 3;\r\n\t\t}\r\n\t\tif(type <= EatCardEnum.CrossSelf){\r\n\t\t\treturn 4;\r\n\t\t}\r\n\t\tif(type <= EatCardEnum.CrossAllOpp){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\treturn 0;\r\n\r\n\t}\r\n    public isHaveEat(isGang : number , card : number):boolean{\r\n\t\tif(isGang == 1){\r\n\t\t\tfor(let i = 0 ; i < this.myPenggangArr.length ; i++){\r\n\t\t\t\tlet have : number = this.myPenggangArr[i].eatData.cardValue;\r\n\t\t\t\tif(have == card){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tpublic haveEatType(isGang : number , card : number):EatCardEnum{\r\n\t\tif(isGang == 1){\r\n\t\t\tfor(let i = 0 ; i < this.myPenggangArr.length ; i++){\r\n\t\t\t\tlet have : number = this.myPenggangArr[i].eatData.cardValue;\r\n\t\t\t\tif(have == card){\r\n\t\t\t\t\treturn this.myPenggangArr[i].eatData.eatType;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn EatCardEnum.EndValue;\r\n\t}\r\n    private showActionImage(source : string , isRemove:boolean = true){\r\n        if(this.isAction){\r\n            return;\r\n        }\r\n        this.isAction = true;\r\n        this.actionImage.node.zIndex = 0;\r\n        Global.Utils.setNewImageToSprite(this.actionImage , source , ()=>{\r\n            this.actionImage.node.active = true;\r\n            if(isRemove){\r\n                cc.tween(this.node).delay(1).call(()=>{\r\n                    this.actionImage.node.active = false;\r\n                    this.isAction = false;\r\n                }).start();\r\n            }else{\r\n                this.isAction = false;\r\n            }\r\n        });\r\n    }\r\n    /**清除最后一个出牌*/\r\n    clearLastPlay(){\r\n        if(UserInfo.ins.selfIsLookPlayer){\r\n            return;\r\n        }\r\n        this.myOutArray[this.myOutArray.length - 1].disTory();\r\n        this.myOutArray.splice(this.myOutArray.length - 1 , 1);\r\n    }\r\n}\r\n"]}