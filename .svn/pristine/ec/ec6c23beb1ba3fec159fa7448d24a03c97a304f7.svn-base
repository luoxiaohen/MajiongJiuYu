{"version":3,"sources":["assets\\Script\\UI\\createRoom\\CreateRoomRuleTemplate.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport EventType from \"../../event/EventType\";\r\nimport GameInfo from \"../../Game/info/GameInfo\";\r\nimport { Msg_CS_CreateTable, Msg_CS_ReqDeletRoomRuleTemplate } from \"../../proto/LobbyMsg\";\r\nimport { TableRuleTempl } from \"../../proto/LobbyMsgDef\";\r\nimport { Global } from \"../../Shared/GloBal\";\r\nimport UIBase from \"../../UIBase\";\r\nimport CreateRoomHelper from \"./CreateRoomHelper\";\r\nimport CreateRoomRuleTemplateItem from \"./CreateRoomRuleTemplateItem\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class CreateRoomRuleTemplate extends UIBase {\r\n    @property (cc.Sprite)\r\n    backGroup : cc.Sprite = null;\r\n    @property (cc.Label)\r\n    mobanName : cc.Label = null;\r\n    @property (cc.Label)\r\n    createLabel : cc.Label  =null;\r\n    @property (cc.Button)\r\n    createRoomBtn : cc.Button = null;\r\n    @property (cc.Node)\r\n    haveGroup : cc.Node = null;\r\n    @property (cc.Node)\r\n    nullGroup : cc.Node = null;\r\n    @property (cc.Button)\r\n    createTemplateBtn : cc.Button = null;\r\n\r\n\r\n    private ruleInfoArr : Array<TableRuleTempl>;\r\n\tprivate itemArr:Array<CreateRoomRuleTemplateItem> = [];\r\n\tprivate selectItem : CreateRoomRuleTemplateItem;\r\n\tprivate callBack : Function;\r\n\tprivate thisObj : any;\r\n    protected onLoad(): void {\r\n        \r\n    }\r\n\r\n    setData (ruleInfoArr : Array<TableRuleTempl> , callBack : Function, thisObj : any){\r\n        this.callBack = callBack;\r\n\t\tthis.thisObj = thisObj;\r\n\t\tthis.ruleInfoArr = ruleInfoArr;\r\n\t\tthis.createElements();\r\n    }\r\n    private createElements(){\r\n        this.mobanName.string = \"牌桌模板(\" + this.ruleInfoArr.length + \"/\" + CreateRoomHelper.ins.gameMaxTemplateNum + \")\";\r\n\t\tlet canCreate : boolean = this.ruleInfoArr.length > 0;\r\n\t\tthis.createRoomBtn.node.active = canCreate ? true : false;\r\n        this.addEvent();\r\n\t\tthis.addChilds();\r\n    }\r\n    private addEvent(){\r\n\t\tGlobal.EventCenter.addEventListener(EventType.RspDeletRoomRuleTemplate , this.onDeletBack , this);\r\n    }\r\n    private addChilds(){\r\n        if(this.ruleInfoArr.length > 0){\r\n\t\t\tthis.nullGroup.active = false;\r\n\t\t\tthis.haveGroup.active = true;\r\n\t\t\tthis.createItem();\r\n\t\t}else{\r\n\t\t\tthis.nullGroup.active = true;\r\n\t\t\tthis.haveGroup.active = false;\r\n\t\t}\r\n    }\r\n    private createItem(){\r\n\t\tthis.haveGroup.removeAllChildren();\r\n\t\tlet item:CreateRoomRuleTemplateItem;\r\n\t\tfor(let i = 0 ; i < this.ruleInfoArr.length ; i++){\r\n            item = cc.instantiate(Global.Utils.getPreFabBySource(\"createRoom/prefab/CreateRoomRuleTemplateItem\")).getComponent(CreateRoomRuleTemplateItem);\r\n\t\t\tif(i == 0 ){\r\n\t\t\t\tthis.selectItem = item;\r\n\t\t\t\tthis.selectItem.setSelect(true);\r\n\t\t\t}\r\n            item.setData(this.ruleInfoArr[i] , this.onItemClickBack , this)\r\n            this.haveGroup.addChild(item.node);\r\n\t\t}\r\n\t}\r\n    /**\r\n\t * @param 1: select 2  change  3 delet 4 other\r\n\t*/\r\n\tprivate onItemClickBack(item : CreateRoomRuleTemplateItem ,type:number){\r\n\t\tswitch(type){\r\n\t\t\tcase 1:\r\n\t\t\tthis.onSelectItem(item);\r\n\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\tthis.onChangeItem(item);\r\n\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\tthis.onDeletItem(item);\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t}\r\n\tprivate onSelectItem(item : CreateRoomRuleTemplateItem){\r\n\t\tif(item.getSelect()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.selectItem.setSelect(false);\r\n\t\tthis.selectItem = item;\r\n\t\tthis.selectItem.setSelect(true);\r\n\t}\r\n\tprivate onChangeItem(item : CreateRoomRuleTemplateItem){\r\n\t\tthis.callBack.bind(this.thisObj)(4 , item.getRuleInfo());\r\n\t}\r\n\tprivate onDeletItem(item : CreateRoomRuleTemplateItem){\r\n\t\tlet msg : Msg_CS_ReqDeletRoomRuleTemplate = new Msg_CS_ReqDeletRoomRuleTemplate();\r\n\t\tmsg.tempId = item.getRuleInfo().templId;\r\n\t\tGlobal.mgr.socketMgr.send(-1,msg);\r\n\t}\r\n\r\n\tprivate onDeletBack(){\r\n\t\tthis.ruleInfoArr = CreateRoomHelper.ins.getCreateRoomRuleArr();\r\n\t\tthis.createElements();\r\n\t}\r\n\tonCreateOneClick(){\r\n\t\tthis.callBack.bind(this.thisObj)(2);\r\n\t}\r\n\tonCrerateRoomClick(){\r\n\t\tlet msg : Msg_CS_CreateTable = new Msg_CS_CreateTable();\r\n\t\tmsg.info = this.selectItem.getRuleInfo().rule;\r\n\t\tmsg.name = this.selectItem.getRuleName();; \r\n\t\tGlobal.mgr.socketMgr.send(-1,msg);\r\n\t\tthis.callBack.bind(this.thisObj)(3);\r\n\r\n\t}\r\n\tonBackClick(){\r\n\t\tthis.callBack.bind(this.thisObj)(1);\r\n\t}\r\n\tonCreateTemplateClick(){\r\n\t\tif(this.ruleInfoArr.length >= CreateRoomHelper.ins.gameMaxTemplateNum){\r\n\t\t\tGlobal.Utils.dialogOutput(\"模板保存已达上限,请先删除再创建\");\r\n\t\t}else{\r\n\t\t\tthis.callBack.bind(this.thisObj)(2);\r\n\t\t}\r\n\t}\r\n\r\n    disTory(){\r\n        super.disTory()\r\n    }\r\n}\r\n"]}