{"version":3,"sources":["assets\\Script\\tips\\SitDownTips.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport GameInfo from \"../Game/info/GameInfo\";\r\nimport UserInfo from \"../Game/info/UserInfo\";\r\nimport { PlayerInfo } from \"../proto/LobbyMsgDef\";\r\nimport { Msg_CS_SitDown } from \"../proto/TableMsg\";\r\nimport { Global } from \"../Shared/GloBal\";\r\nimport CreateRoomHelper from \"../UI/createRoom/CreateRoomHelper\";\r\nimport UIBase from \"../UIBase\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class SitDownTips extends UIBase {\r\n    @property(cc.Button)\r\n    buyCoinsBtn: cc.Button = null;\r\n    @property(cc.Toggle)\r\n    isReady : cc.Toggle = null;\r\n    @property (cc.Label)\r\n    tipsLabel : cc.Label = null;\r\n    @property (cc.Label)\r\n    needLabel : cc.Label = null;\r\n    @property (cc.Label)\r\n    haveLabel : cc.Label = null;\r\n    @property (cc.Label)\r\n    mustLabel : cc.Label = null;\r\n    private isHave:boolean = false;\r\n    private wantSit:number = -1;\r\n    private storReady:string;\r\n    private sitNum:number;\r\n    protected onLoad(): void {\r\n        this.createElement();\r\n    }\r\n    private createElement(){\r\n        let isOpenBookmakerMustBuyHorse:boolean = false;\r\n\t\tlet allMut : number = 0;\r\n\t\tallMut += CreateRoomHelper.ins.initialMultiple;\r\n\t\tif(GameInfo.ins.roomTableInfo.rule.haveHorse){\r\n\t\t\tallMut += CreateRoomHelper.ins.openBuyHorseMultiple;\r\n\t\t}\r\n\t\tif(GameInfo.ins.roomTableInfo.rule.baozi){\r\n\t\t\tallMut += CreateRoomHelper.ins.openDoubleMultiple;\r\n\t\t}\r\n\t\tif(GameInfo.ins.roomTableInfo.rule.handsCnt==16){\r\n\t\t\tallMut += CreateRoomHelper.ins.moreHandMultiple;\r\n\t\t}\r\n\t\tif(GameInfo.ins.roomTableInfo.rule.gamePlayType==2){\r\n\t\t\tallMut += CreateRoomHelper.ins.changeThreeMultiple;\r\n\t\t}\r\n\t\tif(GameInfo.ins.roomTableInfo.rule.isSelectBankerBuyHorse){\r\n\t\t\tisOpenBookmakerMustBuyHorse = true;\r\n\t\t}\r\n\t\tlet need : number = GameInfo.ins.roomTableInfo.rule.baseScore*allMut;\r\n\t\tif(isOpenBookmakerMustBuyHorse){\r\n\t\t\tneed *= CreateRoomHelper.ins.openBookmakerMustBuyHorseMultiple;\r\n\t\t}\r\n        let have : number = UserInfo.ins.myInfo.gold;\r\n        let must : number = Global.Utils.getNeedByRule(GameInfo.ins.roomTableInfo.rule);\r\n        this.needLabel.string = need.toString();\r\n        this.haveLabel.string = \"个人财富:\" + have;\r\n        this.mustLabel.string = \"服务费用:\" + must;\r\n        this.isHave = (have >= (need + must))\r\n        this.tipsLabel.node.active = !this.isHave;\r\n\r\n        this.storReady = Global.Utils.getlocalStorageItem('init_ready_x')\r\n        if(this.storReady == \"1\"){\r\n            this.isReady.check();\r\n        }else{\r\n            this.isReady.uncheck();\r\n        }\r\n    }\r\n    setData(sitNum:number){\r\n        this.sitNum = sitNum;\r\n    }\r\n    onCheckClick(){\r\n        if(this.storReady == \"1\"){\r\n            Global.Utils.addlocalStorageItem(\"init_ready_x\" , \"-1\")\r\n            this.storReady = \"-1\";\r\n        }else{\r\n            Global.Utils.addlocalStorageItem(\"init_ready_x\" , \"1\")\r\n            this.storReady = \"1\"\r\n        }\r\n    }\r\n    onBuyCoinsClick(){\r\n        Global.Utils.debugOutput(\"我点击了购买金币\");\r\n        this.disTory();\r\n    }\r\n    onCloseClick(){\r\n        let msg : Msg_CS_SitDown = new Msg_CS_SitDown();\r\n\t\tmsg.sit = this.sitNum;\r\n\t\tGlobal.mgr.socketMgr.send(-1,msg);\r\n        this.disTory();\r\n    }\r\n    disTory(){\r\n        if(this.node.parent){\r\n            this.node.parent.removeChild(this.node);\r\n            this.destroy();\r\n        }\r\n    }\r\n}\r\n"]}