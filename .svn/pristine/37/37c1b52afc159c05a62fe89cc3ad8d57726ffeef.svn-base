{"version":3,"sources":["assets\\Script\\UI\\createRoom\\CreateRoomRuleTemplateItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport { AntesMultipleEnum } from \"../../enum/EnumManager\";\r\nimport GameInfo from \"../../Game/info/GameInfo\";\r\nimport { GamePiaoTypeEnum, GamePlayTypeEnum, GameRoomTypeEnum, TableRuleInfo, TableRuleTempl } from \"../../proto/LobbyMsgDef\";\r\nimport { Global } from \"../../Shared/GloBal\";\r\nimport UIBase from \"../../UIBase\";\r\nimport CreateRoomHelper from \"./CreateRoomHelper\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class CreateRoomRuleTemplateItem extends UIBase {\r\n    @property (cc.Node)\r\n    changGroup : cc.Node = null;\r\n    @property (cc.Node)\r\n    deletGroup : cc.Node = null;\r\n    @property (cc.Node)\r\n    roomTypeGroup : cc.Node = null;\r\n    @property (cc.Toggle)\r\n    selectBox : cc.Toggle = null;\r\n    @property (cc.Sprite)\r\n    gameTypeImage : cc.Sprite = null;\r\n    @property (cc.Sprite)\r\n    coinImage : cc.Sprite = null;\r\n    @property (cc.Sprite)\r\n    handsImage : cc.Sprite = null;\r\n    @property (cc.Sprite)\r\n    piaoImage : cc.Sprite = null;\r\n    @property (cc.Sprite)\r\n    horseImage : cc.Sprite = null;\r\n    @property (cc.Label)\r\n    roomNameLabel : cc.Label = null;\r\n    @property (cc.Label)\r\n    needCoinsLabel : cc.Label = null;\r\n    @property (cc.Label)\r\n    gameHandsLabel : cc.Label = null;\r\n    @property (cc.Label)\r\n    piaoLabel : cc.Label = null;\r\n    @property (cc.Label)\r\n    horseNumLabel : cc.Label = null;\r\n\r\n    private ruleInfo : TableRuleInfo;\r\n\r\n\tprivate ruleTemplate : TableRuleTempl;\r\n\r\n\tprivate callBack : Function ;\r\n\tprivate thisObj : any;\r\n    protected onLoad(): void {\r\n    }\r\n    setData(ruleInfo : TableRuleTempl , callBack : Function , thisOnj : any){\r\n        this.ruleInfo = ruleInfo.rule;\r\n\t\tthis.ruleTemplate = ruleInfo;\r\n\t\tthis.callBack = callBack;\r\n\t\tthis.thisObj = thisOnj;\r\n        this.createElements();\r\n    }\r\n    private createElements(){\r\n\t\tthis.showGameType();\r\n\t\tthis.showRoomType(); \r\n\t\tthis.roomNameLabel.string = this.ruleTemplate ? this.ruleTemplate.name : \"\";\r\n\t\tthis.needCoinsLabel.string = this.getAll(this.ruleInfo.baseScore).toString();\r\n\t\tthis.gameHandsLabel.string = this.ruleInfo.handsCnt + \"手\";\r\n\t\tthis.showPiao();\r\n\t\tthis.showMa();\r\n\t\tthis.setSelect(false);\r\n    }\r\n\tprivate getAll(nowAntes):number{\r\n\t\tlet isOpenBookmakerMustBuyHorse:boolean = false;\r\n\t\tlet allMut : number = 0;\r\n\t\tallMut += CreateRoomHelper.ins.initialMultiple;\r\n\t\tif(this.ruleInfo.haveHorse){\r\n\t\t\tallMut += CreateRoomHelper.ins.openBuyHorseMultiple;\r\n\t\t}\r\n\t\tif(this.ruleInfo.baozi){\r\n\t\t\tallMut += CreateRoomHelper.ins.openDoubleMultiple;\r\n\t\t}\r\n\t\tif(this.ruleInfo.handsCnt==16){\r\n\t\t\tallMut += CreateRoomHelper.ins.moreHandMultiple;\r\n\t\t}\r\n\t\tif(this.ruleInfo.gamePlayType==2){\r\n\t\t\tallMut += CreateRoomHelper.ins.changeThreeMultiple;\r\n\t\t}\r\n\t\tif(this.ruleInfo.isSelectBankerBuyHorse){\r\n\t\t\tisOpenBookmakerMustBuyHorse = true;\r\n\t\t}\r\n\t\tlet allFen : number = nowAntes*allMut;\r\n\t\tif(isOpenBookmakerMustBuyHorse){\r\n\t\t\tallFen *= CreateRoomHelper.ins.openBookmakerMustBuyHorseMultiple;\r\n\t\t}\r\n\t\treturn allFen;\r\n\t}\r\n\tonBoxClick(){\r\n\t\tthis.callBack.bind(this.thisObj)(this ,1);\r\n\t}\r\n\tonChangeClick(){\r\n\t\tthis.callBack.bind(this.thisObj)(this ,2);\r\n\t}\r\n\tonDeletClick(){\r\n\t\tthis.callBack.bind(this.thisObj)(this ,3);\r\n\t}\r\n\tprivate showMa(){\r\n\t\tif(this.ruleInfo.haveHorse){\r\n\t\t\tthis.horseImage.node.active = true;\r\n\t\t\tthis.horseNumLabel.node.active = true;\r\n\t\t\tthis.horseNumLabel.string = this.ruleInfo.buyHorseNum == 1 ? \"1马\" : \"2马\";\r\n\t\t}else{\r\n\t\t\tthis.horseImage.node.active = false;\r\n\t\t\tthis.horseNumLabel.node.active = false;\r\n\t\t}\r\n\t}\r\n\tprivate showPiao(){\r\n\t\tif(this.ruleInfo.baozi == GamePiaoTypeEnum.None){\r\n\t\t\tthis.piaoImage.node.active = false;\r\n\t\t\tthis.piaoLabel.node.active = false;\r\n\t\t}else{\r\n\t\t\tthis.piaoImage.node.active = true;\r\n\t\t\tthis.piaoLabel.node.active = true;\r\n\t\t\tif(this.ruleInfo.baozi == GamePiaoTypeEnum.ZhuangJiaBiPiao){\r\n\t\t\t\tthis.piaoLabel.string = \"庄家必飘\";\r\n\t\t\t}else{\r\n\t\t\t\tlet str : string = \"\";\r\n\t\t\t\tif(this.ruleInfo.baozi == GamePiaoTypeEnum.ShuaiPiao){\r\n\t\t\t\t\tstr = \"甩飘\"\r\n\t\t\t\t}else{\r\n\t\t\t\t\tstr = \"豹子\"\r\n\t\t\t\t}\r\n\t\t\t\tif(this.ruleInfo.baoziDouble){\r\n\t\t\t\t\tstr += \"(双豹)\"\r\n\t\t\t\t}\r\n\t\t\t\tthis.piaoLabel.string = str;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tprivate showGameType(){\r\n\t\tlet type:GamePlayTypeEnum = this.ruleInfo.gamePlayType;\r\n        let source : string = \"createRoom/resource/createRoom_xuezhan\";\r\n        if(type == GamePlayTypeEnum.HuanSanZhang){\r\n            source = \"createRoom/resource/createRoom_huansan\"\r\n        }\r\n        Global.Utils.setNewImageToSprite(this.gameTypeImage , source);\r\n\t}\r\n\tprivate showRoomType(){\r\n\t\tlet type:GameRoomTypeEnum = this.ruleInfo.roomType;\r\n\t\tlet roomStr:string = \"\";\r\n\t\tswitch(type){\r\n\t\t\tcase GameRoomTypeEnum.SiRenSanFang : \r\n\t\t\t\troomStr = \"四人三房\";\r\n\t\t\tbreak;\r\n\t\t\tcase GameRoomTypeEnum.SiRenLiangFang : \r\n\t\t\t\troomStr = \"四人两房\";\r\n\t\t\tbreak;\r\n\t\t\tcase GameRoomTypeEnum.SanRenLiangFang : \r\n\t\t\t\troomStr = \"三人两房\";\r\n\t\t\tbreak;\r\n\t\t\tcase GameRoomTypeEnum.LiangRenMaJiang : \r\n\t\t\t\troomStr = \"两人两房\";\r\n\t\t\tbreak;\r\n\t\t}\r\n        cc.find(\"/label\" , this.roomTypeGroup).getComponent(cc.Label).string = roomStr;\r\n\t}\r\n\tpublic getRuleInfo():TableRuleTempl {\r\n\t\tlet temp : TableRuleTempl = new TableRuleTempl();\r\n\t\ttemp.rule = this.ruleInfo;\r\n\t\ttemp.name = this.roomNameLabel.string;\r\n\t\ttemp.templId = this.ruleTemplate ? this.ruleTemplate.templId  : null;\r\n\t\treturn temp;\r\n\t}\r\n\tpublic getRuleName():string{\r\n\t\treturn this.roomNameLabel.string;\r\n\t}\r\n\tpublic setSelect(boo:boolean){\r\n        if(boo){\r\n            this.selectBox.check();\r\n        }else{\r\n            this.selectBox.uncheck();\r\n        }\r\n\t}\r\n\tpublic getSelect():boolean{\r\n\t\treturn this.selectBox.isChecked;\r\n\t}\r\n\tpublic disTory(){\r\n\t\tsuper.disTory();\r\n\t}\r\n}\r\n"]}