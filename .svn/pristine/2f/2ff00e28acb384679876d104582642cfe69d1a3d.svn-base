{"version":3,"sources":["assets\\Script\\tips\\GetCardPanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport EventCenter from \"../event/EventCenter\";\r\nimport EventType from \"../event/EventType\";\r\nimport { Msg_CS_TGMMsg } from \"../proto/TableExMsg\";\r\nimport { Msg_SC_PoolsList } from \"../proto/TableMsg\";\r\nimport { Global } from \"../Shared/GloBal\";\r\nimport UIBase from \"../UIBase\";\r\nimport GetCardItem from \"./GetCardItem\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GetCardPanel extends UIBase {\r\n    @property (cc.Node)\r\n    cardGroup : cc.Node = null;\r\n    @property (cc.Node)\r\n    haveGroup : cc.Node = null;\r\n    @property (cc.Button)\r\n    getHandBtn : cc.Button = null;\r\n    @property (cc.Button)\r\n    closeBtn : cc.Button = null;\r\n    @property (cc.Button)\r\n    getFeelBtn : cc.Button = null;\r\n\r\n\r\n\tprivate msg:Msg_SC_PoolsList ;\r\n\r\n    private lastClick : GetCardItem;\r\n    private allClickCard : Array<number> = [];\r\n    protected onLoad(): void {\r\n        let msg : Msg_CS_TGMMsg = new Msg_CS_TGMMsg();\r\n\t\tmsg.cmd = \"getpools\";\r\n\t\tmsg.gmMsg = \"1\";\r\n\t\tGlobal.mgr.socketMgr.send(-1 , msg);\r\n\t\tthis.addEvent();\r\n    }\r\n\tprivate addEvent(){\r\n        Global.EventCenter.addEventListener(EventType.PoolsList , this.onPoolsList, this);\r\n\t}\t\r\n    private onPoolsList(e,msg:Msg_SC_PoolsList){\r\n        this.msg = msg;\r\n\t\tthis.createElements();\r\n    }\r\n    \r\n\tprivate createElements(){\r\n\t\tif(this.msg.pools){\r\n\t\t\tthis.showPools();\r\n\t\t}else{\r\n\t\t\tthis.showAll();\r\n\t\t}\r\n\t}\r\n    private showAll(){\r\n\t\tlet card : GetCardItem;\r\n\t\tlet index:number = 0;\r\n\t\tfor(let i = 1 ; i < 30 ; i++){\r\n\t\t\tif(i%10 != 0){\r\n\t\t\t\tcard = cc.instantiate(Global.Utils.getPreFabBySource(\"tips/GetCardPanel/prefab/GetCardItem\")).getComponent(GetCardItem);\r\n\t\t\t\tthis.cardGroup.addChild(card.node);\r\n                card.setData(i , 4, this.onCardClick,this);\r\n\t\t\t\tcard.node.x = (i%10 - 1)*130;\r\n\t\t\t\tcard.node.y = 460 - (index * 140);\r\n\t\t\t}else{\r\n\t\t\t\tindex++;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n    private showPools(){\r\n\t\tlet arr : Array<number> = this.msg.pools;\r\n\t\tlet remainArr : Array<number> = [];\r\n\t\tfor(let i = 1 ; i < 30 ; i++){\r\n\t\t\tif(i%0 != 0){\r\n\t\t\t\tremainArr[i] = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor(let i = 0 ; i < arr.length ; i++){\r\n\t\t\tremainArr[arr[i]] += 1;\r\n\t\t}\r\n\t\tlet card : GetCardItem;\r\n\t\tlet index:number = 0;\r\n\t\tfor(let i = 1 ; i < 30 ; i++){\r\n\t\t\tif(i%10 != 0){\r\n\t\t\t\tcard = cc.instantiate(Global.Utils.getPreFabBySource(\"tips/GetCardPanel/prefab/GetCardItem\")).getComponent(GetCardItem);\r\n\t\t\t\tthis.cardGroup.addChild(card.node);\r\n                card.setData(i , remainArr[i] , this.onCardClick,this)\r\n\t\t\t\tcard.node.x = (i%10 - 1)*130;\r\n\t\t\t\tcard.node.y = 460 - (index * 140);\r\n\t\t\t}else{\r\n\t\t\t\tindex++;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n    private onCardClick(clickCard : GetCardItem){\r\n\t\tif(clickCard.getCardNum() <= 0){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.lastClick = clickCard;\r\n\t\tthis.allClickCard.push(clickCard.getCardValue());\r\n\t\tthis.showMyHand(clickCard.getCardValue());\r\n\t}\r\n\tprivate showMyHand(cardValue : number){\r\n\t\tlet card : GetCardItem = cc.instantiate(Global.Utils.getPreFabBySource(\"tips/GetCardPanel/prefab/GetCardItem\")).getComponent(GetCardItem);\r\n\t\tthis.haveGroup.addChild(card.node);\r\n\t\tcard.node.x = (this.allClickCard.length - 1)*130;\r\n\t\tcard.node.y = 0;\r\n        card.setData(cardValue , -1, this.onHandCardClick,this)\r\n\t}\r\n\tprivate onHandCardClick(clickCard){\r\n\t\tclickCard.disTory();\r\n\t\tthis.allClickCard.splice(this.allClickCard.indexOf(clickCard.getCardValue()) , 1);\r\n\t\tthis.haveGroup.removeAllChildren();\r\n\t\tfor(let i = 0 ; i < this.allClickCard.length ; i++){\r\n\t\t\tlet card : GetCardItem = cc.instantiate(Global.Utils.getPreFabBySource(\"tips/GetCardPanel/prefab/GetCardItem\")).getComponent(GetCardItem);\r\n\t\t\tthis.haveGroup.addChild(card.node);\r\n            card.setData(this.allClickCard[i] , -1, this.onHandCardClick,this);\r\n\t\t\tcard.node.x = i*130;\r\n\t\t\tcard.node.y = 0;\r\n\t\t}\r\n\t}\r\n\r\n    onCloseClick(){\r\n        this.disTory();\r\n    }\r\n    onGetFeelClick(){\r\n        let msg : Msg_CS_TGMMsg = new Msg_CS_TGMMsg();\r\n\t\tmsg.cmd = \"want\";\r\n\t\tmsg.gmMsg = this.allClickCard[this.allClickCard.length - 1].toString();\r\n\t\tGlobal.mgr.socketMgr.send(-1, msg);\r\n\t\tthis.disTory();\r\n    }\r\n    onGetHandClick(){\r\n        let msg : Msg_CS_TGMMsg = new Msg_CS_TGMMsg();\r\n\t\tmsg.cmd = \"wanth\";\r\n\t\tmsg.gmMsg = this.allClickCard.toString();\r\n\t\tGlobal.mgr.socketMgr.send(-1 , msg);\r\n\t\tthis.disTory();\r\n    }\r\n\tpublic disTory(){\r\n\t\tthis.haveGroup.removeAllChildren();\r\n\t\tthis.cardGroup.removeAllChildren();\r\n\t\tsuper.disTory()\r\n\t}\r\n}\r\n"]}