{"version":3,"sources":["assets\\Script\\UI\\card\\MajiongHandCard.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport { CardGroupPointBySelfEnum, CardTypeEnum } from \"../../enum/EnumManager\";\r\nimport GameInfo from \"../../Game/info/GameInfo\";\r\nimport UserInfo from \"../../Game/info/UserInfo\";\r\nimport TimeAndMoveManager from \"../../mgr/TimeAndMoveManager\";\r\nimport { GangSelfStepRcd } from \"../../proto/MahjStepMsgDef\";\r\nimport { Global } from \"../../Shared/GloBal\";\r\nimport Utils from \"../../Shared/Utils\";\r\nimport UIBase from \"../../UIBase\";\r\nimport { ListenCard } from \"../../utils/InterfaceHelp\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class MajiongHandCard extends UIBase {\r\n    @property (cc.Sprite)\r\n    majiongBg : cc.Sprite = null;\r\n    @property (cc.Sprite)\r\n    majiongFont : cc.Sprite = null;\r\n    @property (cc.Sprite)\r\n    majiongDice : cc.Sprite = null;\r\n    @property (cc.Sprite)\r\n    majiongCanOut : cc.Sprite = null;\r\n    private _isLoadShow: boolean = false;\r\n    public get isLoadShow(): boolean {\r\n        return this._isLoadShow;\r\n    }\r\n    public set isLoadShow(value: boolean) {\r\n        this._isLoadShow = value;\r\n    }\r\n    /**牌值*/\r\n    private _cardValue: number = 0;\r\n    public get cardValue(): number {\r\n        return this._cardValue;\r\n    }\r\n    public set cardValue(value: number) {\r\n        this._cardValue = value;\r\n        this.showCardValue();\r\n    }\r\n    /**牌类型*/\r\n    private _cardType: CardTypeEnum = CardTypeEnum.EndValue;\r\n    public get cardType(): CardTypeEnum {\r\n        return this._cardType;\r\n    }\r\n    public set cardType(value: CardTypeEnum) {\r\n        this._cardType = value;\r\n    }\r\n    /**听牌数据*/\r\n\tprivate _listenData: ListenCard;\r\n    public get listenData(): ListenCard {\r\n        return this._listenData;\r\n    }\r\n    public set listenData(value: ListenCard) {\r\n        this._listenData = value;\r\n    }\r\n    /**是否是定缺牌*/\r\n    private _isDice: boolean = false;\r\n    public get isDice(): boolean {\r\n        return this._isDice;\r\n    }\r\n    public set isDice(value: boolean) {\r\n        this._isDice = value;\r\n        this.majiongDice.node.active = value;\r\n    }\r\n    /**是否被选中*/\r\n    private _isSelect: boolean = false;\r\n    public get isSelect(): boolean {\r\n        return this._isSelect;\r\n    }\r\n    public set isSelect(value: boolean) {\r\n        this._isSelect = value;\r\n        this.showSelect();\r\n    }\r\n    /***是否是出牌可听*/\r\n    private _isOutTing: boolean = false;\r\n    public get isOutTing(): boolean {\r\n        return this._isOutTing;\r\n    }\r\n    public set isOutTing(value: boolean) {\r\n        this._isOutTing = value;\r\n        this.majiongCanOut.node.active = value;\r\n    }\r\n    /***是否在展示中*/\r\n    private _isShow: boolean = false;\r\n    public get isShow(): boolean {\r\n        return this._isShow;\r\n    }\r\n    public set isShow(value: boolean) {\r\n        this._isShow = value;\r\n        this.node.active = value;\r\n        if(!value){\r\n            this.tingData = null;\r\n            this.tingLv = -1;\r\n        }\r\n    }\r\n    /***当前牌相对于第一视角属于那个位置*/\r\n    private _bySelfPoint: CardGroupPointBySelfEnum = CardGroupPointBySelfEnum.Self;\r\n    public get bySelfPoint(): CardGroupPointBySelfEnum {\r\n        return this._bySelfPoint;\r\n    }\r\n    public set bySelfPoint(value: CardGroupPointBySelfEnum) {\r\n        this._bySelfPoint = value;\r\n        this.initCardSize();\r\n    }\r\n    /***当前牌的大小*/\r\n    private _cardSize = { _w: 131, _h: 182 };\r\n    public get cardSize() {\r\n        return this._cardSize;\r\n    }\r\n    public set cardSize(value) {\r\n        this._cardSize = value;\r\n    }\r\n    protected onLoad(): void {\r\n        this.initMajiong();\r\n        this.showMajiongCard();\r\n    }\r\n    protected start(): void {\r\n    }\r\n\r\n    /***摸牌时候得入牌动作是否已经结束*/\r\n    private _isActionOver: boolean = true;\r\n    public get isActionOver(): boolean {\r\n        return this._isActionOver;\r\n    }\r\n    public set isActionOver(value: boolean) {\r\n        this._isActionOver = value;\r\n    }\r\n    /***我的出牌可听权重*/\r\n    private _tingLv: number = 0;\r\n    public get tingLv(): number {\r\n        return this._tingLv;\r\n    }\r\n    public set tingLv(value: number) {\r\n        this._tingLv = value;\r\n    }\r\n    /***我的出牌可听数据*/\r\n    private _tingData: ListenCard = null;\r\n    public get tingData(): ListenCard {\r\n        return this._tingData;\r\n    }\r\n    public set tingData(value: ListenCard) {\r\n        this._tingData = value;\r\n    }\r\n\r\n    /***是否是摸起来得最后一张*/\r\n    private _isFeel: boolean = false;\r\n    public get isFeel(): boolean {\r\n        return this._isFeel;\r\n    }\r\n    public set isFeel(value: boolean) {\r\n        this._isFeel = value;\r\n    }\r\n    /**初始化手牌*/\r\n    initMajiong(){\r\n        this.isDice = false;\r\n        this.isSelect = false;\r\n        this.isOutTing = false;\r\n        this.isShow = this.isLoadShow\r\n        this.showCardValue();\r\n    }\r\n    private showSelect(){\r\n        if(this.bySelfPoint == CardGroupPointBySelfEnum.Self){\r\n            if(this.isSelect){\r\n                this.node.y = 50;\r\n            }else{\r\n                this.node.y = 0;\r\n            }\r\n        }\r\n    }\r\n    private showCardValue(){\r\n        if(UserInfo.ins.selfIsLookPlayer){\r\n\r\n        }else{\r\n            if(this.cardValue){\r\n                this.cardType = Math.floor(this.cardValue/10);\r\n                this.showMajiongFont();\r\n                this.isDice = Global.Utils.getIsDice(this.cardValue , UserInfo.ins.myDiceType);\r\n            }\r\n        }\r\n    }\r\n    private showMajiongFont(){\r\n        if(this.bySelfPoint == CardGroupPointBySelfEnum.Self){\r\n            let newSource : string = \"majiongCard/resource/\" + Global.Utils.getCardStrByValue(this.cardValue);\r\n            Global.Utils.setNewImageToSprite(this.majiongFont , newSource , null);\r\n            this.majiongFont.node.active = true;\r\n        }\r\n    }\r\n    showMajiongPut(){\r\n        if(this.bySelfPoint == CardGroupPointBySelfEnum.Self){\r\n            let newSource : string = \"comResource/com/ty_majiang0\";\r\n            Global.Utils.setNewImageToSprite(this.majiongBg , newSource , null);\r\n            this.majiongFont.node.active = false;\r\n        }\r\n    }\r\n    showMajiongUp(){\r\n        if(this.bySelfPoint == CardGroupPointBySelfEnum.Self){\r\n            if(UserInfo.ins.selfIsLookPlayer){\r\n                Global.Utils.setNewImageToSprite(this.majiongBg , \"majiongCard/resource/0_0_2_2\" , null);\r\n            }else{\r\n                let newSource : string = \"majiongCard/resource/0_0_2\";\r\n                Global.Utils.setNewImageToSprite(this.majiongBg , newSource , null);\r\n            }\r\n        }\r\n    }\r\n    showMajiongCard(){\r\n        this.majiongCanOut.node.active = false;\r\n        this.majiongDice.node.active = false;\r\n        let bgSource:string = \"\";\r\n        switch(this.bySelfPoint){\r\n            case CardGroupPointBySelfEnum.Self:\r\n                if(UserInfo.ins.selfIsLookPlayer){\r\n                    this.majiongBg.node.scaleX = 1;\r\n                    bgSource = \"majiongCard/resource/0_0_2_2\";\r\n                    this.cardSize = { _w: 131, _h: 182 };\r\n                }else{\r\n                    bgSource = \"majiongCard/resource/0_0_2\";\r\n                    this.majiongBg.node.scaleX = 1;\r\n                    this.cardSize = { _w: 131, _h: 182 };\r\n                }\r\n            break;\r\n            case CardGroupPointBySelfEnum.Down:\r\n                bgSource = \"majiongCard/resource/1_0_2\";\r\n                this.majiongBg.node.scaleX = 1;\r\n                this.cardSize = { _w: 57, _h: 77 };\r\n            break;\r\n            case CardGroupPointBySelfEnum.Opp:\r\n                bgSource = \"majiongCard/resource/2_0_2\";\r\n                this.majiongBg.node.scaleX = 1;\r\n                this.cardSize = { _w: 58, _h: 84 };\r\n            break;\r\n            case CardGroupPointBySelfEnum.Up:\r\n                bgSource = \"majiongCard/resource/1_0_2\";\r\n                this.majiongBg.node.scaleX = -1;\r\n                this.cardSize = { _w: 57, _h: 77 };\r\n            break;\r\n        }\r\n        Global.Utils.setNewImageToSprite(this.majiongBg , bgSource);\r\n    }\r\n\r\n    showGetAction(delyCount:number){\r\n        let nowX:number\r\n        switch(this.bySelfPoint){\r\n            case CardGroupPointBySelfEnum.Self:\r\n                cc.tween(this.node).to(delyCount*TimeAndMoveManager.ins.getWallActionTime/Global.Utils.getMaxPlayerByGameType(GameInfo.ins.roomTableInfo.rule.roomType), { y : 0}).call(function () {\r\n                }).start();\r\n            break;\r\n            case CardGroupPointBySelfEnum.Down:\r\n                nowX = this.node.x;\r\n                cc.tween(this.node).to(delyCount*TimeAndMoveManager.ins.getWallActionTime/Global.Utils.getMaxPlayerByGameType(GameInfo.ins.roomTableInfo.rule.roomType), { x : nowX - 20}).call(function () {\r\n                }).start();\r\n            break;\r\n            case CardGroupPointBySelfEnum.Opp:\r\n                cc.tween(this.node).to(delyCount*TimeAndMoveManager.ins.getWallActionTime/Global.Utils.getMaxPlayerByGameType(GameInfo.ins.roomTableInfo.rule.roomType), { y : 0}).call(function () {\r\n                }).start();\r\n            break;\r\n            case CardGroupPointBySelfEnum.Up:\r\n                nowX = this.node.x;\r\n                cc.tween(this.node).to(delyCount*TimeAndMoveManager.ins.getWallActionTime/Global.Utils.getMaxPlayerByGameType(GameInfo.ins.roomTableInfo.rule.roomType), { x : nowX+20}).call(function () {\r\n                }).start();\r\n            break;\r\n        }\r\n    }\r\n\r\n    initCardSize(){\r\n        switch(this.bySelfPoint){\r\n            case CardGroupPointBySelfEnum.Self:\r\n                this.cardSize = { _w: 131, _h: 182 };\r\n            break;\r\n            case CardGroupPointBySelfEnum.Down:\r\n                this.cardSize = { _w: 57, _h: 77 };\r\n            break;\r\n            case CardGroupPointBySelfEnum.Opp:\r\n                this.cardSize = { _w: 58, _h: 84 };\r\n            break;\r\n            case CardGroupPointBySelfEnum.Up:\r\n                this.cardSize = { _w: 57, _h: 77 };\r\n            break;\r\n        }\r\n    }\r\n    /**展示听牌*/\r\n    public showListion(){\r\n        if(UserInfo.ins.selfIsLookPlayer){\r\n            return;\r\n        }\r\n        this.tingData = UserInfo.ins.getTingByCardValue(this.cardValue);\r\n        if(this.tingData){\r\n            this.tingLv = UserInfo.ins.getOutType(this.tingData , UserInfo.ins.outTing)\r\n        }\r\n        if(this.tingLv >= 0){\r\n            this.showOutLvImage();\r\n            this.isOutTing = true;\r\n        }\r\n    }\r\n    /**展示可出图片*/\r\n    private showOutLvImage(){\r\n        if(UserInfo.ins.selfIsLookPlayer){\r\n            return;\r\n        }\r\n        switch(this.tingLv){\r\n            case 0:\r\n                Global.Utils.setNewImageToSprite(this.majiongCanOut , \"comResource/font/game_jiantou2\");\r\n            break;\r\n            case 1:\r\n                Global.Utils.setNewImageToSprite(this.majiongCanOut , \"comResource/font/game_jiantou3\");\r\n            break;\r\n            case 2:\r\n                Global.Utils.setNewImageToSprite(this.majiongCanOut , \"comResource/font/game_jiantou4\");\r\n            break;\r\n            case 3:\r\n                Global.Utils.setNewImageToSprite(this.majiongCanOut , \"comResource/font/game_jiantou1\");\r\n            break;\r\n        }\r\n    }\r\n    /***\r\n     * 换三插入后的位置\r\n    */\r\n    private changethreePoint:cc.Vec2;\r\n    private _changeCount: number = 1;\r\n    public get changeCount(): number {\r\n        return this._changeCount;\r\n    }\r\n    public set changeCount(value: number) {\r\n        this._changeCount = value;\r\n    }\r\n    setNewPoint(x,y){\r\n        this.changethreePoint = new cc.Vec2(x , y )\r\n    }\r\n    getNewPoint():cc.Vec2{\r\n        return this.changethreePoint;\r\n    }\r\n\r\n    disTory(){\r\n        super.disTory();\r\n    }\r\n}\r\n"]}