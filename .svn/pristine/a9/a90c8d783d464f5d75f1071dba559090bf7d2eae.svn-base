{"version":3,"sources":["assets\\Script\\UI\\over\\OverHandCardItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport { EatCardEnum } from \"../../enum/EnumManager\";\r\nimport GameInfo from \"../../Game/info/GameInfo\";\r\nimport UserInfo from \"../../Game/info/UserInfo\";\r\nimport { MsgMajSer } from \"../../proto/TableMsgDef\";\r\nimport { Global } from \"../../Shared/GloBal\";\r\nimport UIBase from \"../../UIBase\";\r\nimport { PengGangData } from \"../../utils/InterfaceHelp\";\r\nimport MajiongEatItem from \"../card/MajiongEatItem\";\r\nimport MajiongHandCard from \"../card/MajiongHandCard\";\r\nimport MajiongOutCard from \"../card/MajiongOutCard\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class OverHandCardItem extends UIBase {\r\n    @property (cc.Node)\r\n    cardGroup : cc.Node = null;\r\n\r\n    private handArr : Array<number> = [];\r\n\tprivate eatArr : Array<MsgMajSer> = [];\r\n\tprivate huCard : number;\r\n\tprivate _w:number=0;\r\n\r\n\r\n    public setNewData(eatArr : Array<MsgMajSer> , handCard:Array<number> , huCard:number){\r\n        this.handArr = handCard;\r\n\t\tthis.eatArr = eatArr;\r\n\t\tthis.huCard = huCard;\r\n\t\tthis._w = 0;\r\n        this.createElements();\r\n    }\r\n    private createElements(){\r\n\t\tthis.cardGroup.removeAllChildren();\r\n        this.showEat();\r\n\t\tthis.showHand();\r\n\t\tthis.showFeel();\r\n    }\r\n    private showFeel(){\r\n\t\tif(this.huCard > 0){\r\n\t\t\tlet playe : MajiongOutCard = cc.instantiate(Global.Utils.getPreFabBySource(\"majiongCard/prefab/MajiongOutCard\")).getComponent(MajiongOutCard);\r\n\t\t\tplaye.cardValue = this.huCard;\r\n\t\t\tplaye.bySelfPoint = 0;\r\n\t\t\tthis.cardGroup.addChild(playe.node);\r\n\t\t\tthis._w += playe.node.width + 20;\r\n\t\t\tplaye.node.x = this._w\r\n\t\t}\r\n\t}\r\n\tprivate showHand(){\r\n\t\tlet card : MajiongHandCard;\r\n\t\tlet isRemoveHu : boolean = false;\r\n\t\tfor(let i = 0 ; i < this.handArr.length ; i++){\r\n\t\t\tif(this.handArr[i] == this.huCard && !isRemoveHu){\r\n\t\t\t\tisRemoveHu = true;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tcard = cc.instantiate(Global.Utils.getPreFabBySource(\"majiongCard/prefab/MajiongHandCard\")).getComponent(MajiongHandCard);\r\n\t\t\tcard.cardValue = this.handArr[i];\r\n\t\t\tcard.isLoadShow = true;\r\n\t\t\tcard.bySelfPoint = 0;\r\n\t\t\tcard.node.scaleX = 0.6 ; \r\n\t\t\tcard.node.scaleY = 0.6;\r\n\t\t\tcard.node.x = this._w;\r\n\t\t\tthis.cardGroup.addChild(card.node);\r\n\t\t\tthis._w += card.cardSize._w*0.6;\r\n\t\t}\r\n\t}\r\n\tprivate showEat(){\r\n\t\tlet eat : MsgMajSer;\r\n\t\tlet data:PengGangData;\r\n\t\tlet item : MajiongEatItem;\r\n\t\tfor(let i = 0 ; i < this.eatArr.length ; i++){\r\n\t\t\teat = this.eatArr[i];\r\n\t\t\tdata = new PengGangData();\r\n\t\t\tdata.cardValue = eat.majID;\r\n\t\t\tdata.eatType = this.getEatType(eat.type,eat.targetNum , eat.getType);\r\n\t\t\tdata.havePointBySelf = 0;\r\n\t\t\titem = cc.instantiate(Global.Utils.getPreFabBySource(\"majiongCard/prefab/MajiongEatItem\")).getComponent(MajiongEatItem);\r\n\t\t\titem.eatData = data;\r\n\t\t\titem.node.scaleX = 0.6;\r\n\t\t\titem.node.scaleY = 0.6;\r\n\t\t\titem.node.x = this._w;\r\n\t\t\tthis.cardGroup.addChild(item.node);\r\n\t\t\tthis._w += item.size.x * 0.6 + 10;\r\n\t\t}\r\n\t}\r\n\tprivate getEatType(type : number , sit:number , getType : number):EatCardEnum{\r\n\t\tlet point : number = (UserInfo.ins.mySitIndex - sit)%Global.Utils.getMaxPlayerByGameType(GameInfo.ins.roomTableInfo.rule.roomType)\r\n\t\tif(point < 0){\r\n\t\t\tpoint = point*-1;\r\n\t\t}\r\n\t\tif(type == 3){\r\n\t\t\tif(point == 1){\r\n\t\t\t\treturn EatCardEnum.EatDown;\r\n\t\t\t}else if(point == 2){\r\n\t\t\t\treturn EatCardEnum.EatOpposite;\r\n\t\t\t}else if(point == 3){\r\n\t\t\t\treturn EatCardEnum.EatUp;\r\n\t\t\t}\r\n\t\t}else if(type == 4){\r\n\t\t\tif(getType == 2){\r\n\t\t\t\tif(point == 1){\r\n\t\t\t\t\treturn EatCardEnum.CrossAllDown;\r\n\t\t\t\t}else if(point == 2){\r\n\t\t\t\t\treturn EatCardEnum.CrossAllOpp;\r\n\t\t\t\t}else if(point == 3){\r\n\t\t\t\t\treturn EatCardEnum.CrossAllUp;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(point == 0){\r\n\t\t\t\t\treturn EatCardEnum.CrossSelf;\r\n\t\t\t\t}else if(point == 1){\r\n\t\t\t\t\treturn EatCardEnum.CrossDown;\r\n\t\t\t\t}else if(point == 2){\r\n\t\t\t\t\treturn EatCardEnum.CrossOpposite;\r\n\t\t\t\t}else if(point == 3){\r\n\t\t\t\t\treturn EatCardEnum.CrossUp;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n"]}