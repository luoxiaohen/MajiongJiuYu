{"version":3,"sources":["assets\\Script\\com\\CallBack.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { Global } from \"../Shared/GloBal\";\r\nimport { IObjectPool, ObjectPool } from \"./ObjectPool\";\r\n\r\n/**\r\n\t * 回调函数 封装\r\n\t */\r\n export class CallBack implements IObjectPool{\r\n\tprivate static sCallBackPool:ObjectPool = new ObjectPool();\r\n\tprivate mOnCallBackFunction: Function;\r\n\tprivate mRef: any;\r\n\tprivate mOnce:boolean;\r\n\tprivate mParams:any;\r\n\tpublic constructor() {\r\n\t}\r\n\tpublic create(_call: Function, _targetRef: any,_once:boolean = false,..._params ) {\r\n\t\tif (_call ) {\r\n\t\t\tthis.mOnce = _once;\r\n\t\t\tthis.mOnCallBackFunction = _targetRef ? _call.bind(_targetRef) : _call;\r\n\t\t\tthis.mRef = _targetRef;\r\n\t\t\tthis.mParams = _params;\r\n\t\t}\r\n\t}\r\n\tpublic excute(..._params) {\r\n\t\tif (this.mOnCallBackFunction) {\r\n\t\t\tlet _newParams = _params.length == 0 ? this.mParams : _params;\r\n\t\t\tGlobal.Utils.debugOutput(\"回调的消息：\"+_newParams)\r\n\t\t\tthis.mOnCallBackFunction.apply(this.mRef, _newParams );\r\n\t\t\tif( this.mOnce ){\r\n\t\t\t\tCallBack.unbind( this );\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\t//Log.warn(\"无效的回调函数调用\");\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * 延迟执行\r\n\t * @param _delay \r\n\t * @param _params \r\n\t */\r\n\tpublic delayExcute(_delay:number=1,..._params ){\r\n\t\t_delay = _delay < 0 ? 0 :_delay;\r\n\t\tsetTimeout(( _p )=>{\r\n\t\t\tthis.excute.apply( this,_p );\r\n\t\t},_delay,_params );\r\n\t}\r\n\tpublic checkEqual( _call:Function,_targetRef:any ){\r\n\t\treturn _call == this.mOnCallBackFunction && _targetRef == this.mRef;\r\n\t}\r\n\tpublic equalTarget( _targetRef:any ){\r\n\t\treturn this.mRef == _targetRef;\r\n\t}\r\n\t/**在获取时调用 */\r\n\tpublic objectInit(){\r\n\t}\r\n\tpublic objectReset(){\r\n\t\tthis.mOnce = false;\r\n\t\tthis.mOnCallBackFunction = null;\r\n\t\tthis.mRef = null;\r\n\t\tthis.mParams = null;\r\n\t}\r\n\t/**[public | static] \r\n\t * \r\n\t * @param _call \r\n\t * @param _targetRef \r\n\t * @param _once 是否执行一次 执行后主动释放\r\n\t * @param _params 执行参数 可预先缓存参数 也可以在excute时传入参数 excute的参数优先\r\n\t */\r\n\tpublic static bind(_call: Function, _targetRef: any,_once:boolean = false,..._params ): CallBack {\r\n\t\tthis.sCallBackPool.regObject( CallBack );\r\n\t\tlet _callBack: CallBack =  this.sCallBackPool.getObject();\r\n\t\t// _callBack.create(_call, _targetRef,_once,_params );\r\n\t\t_params.unshift(_call,_targetRef,_once );\r\n\t\t_callBack.create.apply(_callBack,_params)\r\n\t\treturn _callBack;\r\n\t}\r\n\t/**[public | static] \r\n\t * \r\n\t * @param _callBack \r\n\t */\r\n\tpublic static unbind(_callBack:CallBack ){\r\n\t\t_callBack && this.sCallBackPool.putObject(_callBack);\r\n\t}\r\n}"]}