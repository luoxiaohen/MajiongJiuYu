{"version":3,"sources":["assets\\Script\\UI\\MainLobbyPanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport EventType from \"../event/EventType\";\r\nimport GameInfo from \"../Game/info/GameInfo\";\r\nimport { Msg_CS_CreateTable, Msg_CS_GMMsg, Msg_CS_ReqGetRoomRuleTemplate } from \"../proto/LobbyMsg\";\r\nimport { GamePiaoTypeEnum, GamePlayTypeEnum, GameRoomTypeEnum, TableRuleInfo, TableRuleTempl } from \"../proto/LobbyMsgDef\";\r\nimport { Msg_SC_RoomInfo } from \"../proto/TableMsg\";\r\nimport { Global } from \"../Shared/GloBal\";\r\nimport Utils from \"../Shared/Utils\";\r\nimport UIBase from \"../UIBase\";\r\nimport CreateRommAndFriendPanel from \"./createRoom/CreateRommAndFriendPanel\";\r\nimport CreateRoomHelper from \"./createRoom/CreateRoomHelper\";\r\nimport CreateRoomRulerPanel from \"./createRoom/CreateRoomRulerPanel\";\r\nimport CreateRoomRuleTemplate from \"./createRoom/CreateRoomRuleTemplate\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class MainLobbyPanel extends UIBase {\r\n\r\n    @property(cc.Node)\r\n    panelGroup: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    menuGroup: cc.Node = null;\r\n    \r\n    @property(cc.Button)\r\n    mainBtn: cc.Button = null;\r\n\r\n    @property(cc.Button)\r\n    recordBtn: cc.Button = null;\r\n\r\n    @property(cc.Button)\r\n    teamBtn: cc.Button = null;\r\n\r\n    @property(cc.Button)\r\n    clubBtn: cc.Button = null;\r\n\r\n    @property(cc.Button)\r\n    infoBtn: cc.Button = null;\r\n\r\n    @property (cc.Node)\r\n    tipsGroup : cc.Node = null;\r\n\r\n    private nowType : number = 3;\r\n\r\n\r\n    private createRoomPanel : CreateRommAndFriendPanel;\r\n    private createRoomRuler : CreateRoomRulerPanel;\r\n    private createRoomTemplate : CreateRoomRuleTemplate;\r\n    onLoad(): void {\r\n        Global.Utils.debugOutput(\"MainLobbyPanel ==> onLoad\")\r\n        this.addEvent();\r\n    }\r\n\r\n    private addEvent(){\r\n        Global.EventCenter.addEventListener(EventType.GET_NEW_ROOM_INFO , this.onRspRoomInfo , this)\r\n        Global.EventCenter.addEventListener(EventType.CreateRoomRuleTipsClick , this.onShowRuleTips , this);\r\n\r\n\t\tGlobal.EventCenter.addEventListener(EventType.RspGetRoomRuleTemplate , this.onGetTemplateBack , this);\r\n\t\tGlobal.EventCenter.addEventListener(EventType.GameInviteMsg , this.onGameInvite , this);\r\n\r\n    }\r\n\tprivate onShowRuleTips(){\r\n\t\t// if(this.createRuleTips){\r\n\t\t// \tthis.clearCreateRuleTips();\r\n\t\t// }\r\n\t\t// this.createRuleTips = new CreateRoomRuleTips(e.data);\r\n\t\t// this.topGroup.addChild(this.createRuleTips);\r\n\t}\r\n    /**创建游戏房间返回*/\r\n    private onRspRoomInfo(type,data:Msg_SC_RoomInfo){\r\n        cc.director.loadScene(\"mainMajiong\");\r\n        this.destroy();\r\n    }   \r\n     /**主页按钮点击*/\r\n     onMainBtnClick(event, param){\r\n        if(this.nowType == 3){\r\n            return;\r\n        }\r\n        this.removeAll();\r\n        this.nowType = 3;\r\n         Global.Utils.debugOutput(\"MainLobbyPanel ==> 主页点击\")\r\n\r\n    }\r\n    /**战绩按钮点击*/\r\n    onRecordBtnClick(event, param){\r\n        if(this.nowType == 1){\r\n            return;\r\n        }\r\n        this.removeAll();\r\n        this.nowType = 1;\r\n        Global.Utils.debugOutput(\"MainLobbyPanel ==> 战绩点击\")\r\n\r\n    }\r\n    /**约局按钮点击*/\r\n    onTeamBtnClick(event, param){\r\n        if(this.nowType == 2){\r\n            return;\r\n        }\r\n        this.removeAll();\r\n        this.nowType = 2;\r\n        Global.Utils.debugOutput(\"MainLobbyPanel ==> 约局按钮点击\")\r\n        Global.DialogManager.createDialog('createRoom/prefab/CreateRommAndFriendPanel',null,(any,createDialog)=>{\r\n            this.createRoomPanel = createDialog.getComponent(CreateRommAndFriendPanel);\r\n            this.createRoomPanel.setCallBack(this.onCreateOrSave , this);\r\n            createDialog.y = -1920;\r\n        },this.panelGroup);\r\n    }\r\n    private onCreateOrSave(type:number){\r\n\t\tif(type == 1){\r\n\t\t\tthis.showSavePanel();\r\n\t\t}else{\r\n\t\t\tthis.showCreatePanel();\r\n\t\t}\r\n\t}\r\n    private showCreatePanel(ruleInfo : TableRuleTempl=null){\r\n        Global.DialogManager.createDialog('createRoom/prefab/CreateRoomRulerPanel',null,(any,createDialog)=>{\r\n            this.createRoomRuler = createDialog.getComponent(CreateRoomRulerPanel);\r\n            createDialog.y = -1920;\r\n            createDialog.x = 1080;\r\n            this.createRoomRuler.setData(this.onRuleBack , this , ruleInfo)\r\n            Global.Utils.showPanelAction(this.createRoomRuler.node , new cc.Vec2(0,-1920))\r\n        },this.tipsGroup);\r\n    }\r\n    /**规则界面回调*/\r\n\tprivate onRuleBack(type:number){\r\n\t\tif(type == 1){\r\n\t\t\tthis.onRuleToBack();\r\n\t\t}else{\r\n\t\t\tif(this.createRoomRuler){\r\n\t\t\t\tGlobal.Utils.hidePanelAction(this.createRoomRuler.node , new cc.Vec2(-1080 , -1920) , ()=>{\r\n\t\t\t\t\tthis.clearRoomRule();\r\n\t\t\t\t} , this);\r\n                this.showSavePanel();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n    /**打开模板*/\r\n\tprivate showSavePanel(){\r\n\t\tthis.clearRoomTemplate();\r\n\t\tlet arr:Array<TableRuleTempl> = CreateRoomHelper.ins.getCreateRoomRuleArr();\r\n\t\tif(arr && arr.length > 0){\r\n\t\t\tthis.onGetTemplateBack();\r\n\t\t}else{\r\n\t\t\tGlobal.Utils.showWait();\r\n\t\t\tlet msg : Msg_CS_ReqGetRoomRuleTemplate = new Msg_CS_ReqGetRoomRuleTemplate();\r\n\t\t\tGlobal.mgr.socketMgr.send(-1,msg);\r\n\t\t}\r\n\t}\r\n\tprivate onGetTemplateBack(){\r\n\t\tGlobal.Utils.hideWait();\r\n        Global.DialogManager.createDialog('createRoom/prefab/CreateRoomRuleTemplate',null,(any,createDialog)=>{\r\n            this.createRoomTemplate = createDialog.getComponent(CreateRoomRuleTemplate);\r\n            createDialog.y = -1920;\r\n            createDialog.x = 1080;\r\n            this.createRoomTemplate.setData(CreateRoomHelper.ins.getCreateRoomRuleArr(), this.onTempLateBack , this)\r\n            Global.Utils.showPanelAction(this.createRoomTemplate.node , new cc.Vec2(0,-1920))\r\n        },this.tipsGroup);\r\n\t\tthis.onRuleToBack();\r\n\t}\r\n    /**\r\n\t * @param type  1 back 2 template 3 room 4 open or change\r\n\t*/\r\n\tprivate onTempLateBack(type:number , ruleInfo : TableRuleTempl=null){\r\n\t\tif(type == 1){\r\n\t\t\tGlobal.Utils.hidePanelAction(this.createRoomTemplate.node , new cc.Vec2(-1080 , -1920) , ()=>{\r\n\t\t\t\tthis.clearRoomTemplate();\r\n\t\t\t} , this);\r\n\t\t}else if(type == 2){\r\n\t\t\tGlobal.Utils.hidePanelAction(this.createRoomTemplate.node , new cc.Vec2(-1080 , -1920) , ()=>{\r\n\t\t\t\tthis.clearRoomTemplate();\r\n\t\t\t} , this);\r\n            this.showCreatePanel();\r\n\r\n\t\t}else if(type == 3){\r\n\t\t\tGlobal.Utils.hidePanelAction(this.createRoomTemplate.node , new cc.Vec2(-1080 , -1920) , ()=>{\r\n\t\t\t\tthis.clearRoomTemplate();\r\n\t\t\t} , this);\r\n\t\t}else if(type == 4){\r\n\t\t\tGlobal.Utils.hidePanelAction(this.createRoomTemplate.node , new cc.Vec2(-1080 , -1920) , ()=>{\r\n\t\t\t\tthis.clearRoomTemplate();\r\n\t\t\t} , this);\r\n            this.showCreatePanel(ruleInfo);\r\n\t\t}\r\n\t}\r\n\tprivate clearRoomTemplate(){\r\n\t\tif(this.createRoomTemplate){\r\n\t\t\tthis.createRoomTemplate.disTory();\r\n\t\t\tthis.createRoomTemplate = null;\r\n\t\t}\r\n\t}\r\n\t/**规则界面返回*/\r\n\tprivate onRuleToBack(){\r\n\t\tif(this.createRoomRuler){\r\n\t\t\tGlobal.Utils.hidePanelAction(this.createRoomRuler.node , new cc.Vec2(-1080 , -1920) , ()=>{\r\n\t\t\t\tthis.clearRoomRule();\r\n\t\t\t} , this);\r\n\t\t}\r\n\t}\r\n    private clearRoomRule(){\r\n\t\tif(this.createRoomRuler){\r\n\t\t\tthis.createRoomRuler.disTory();\r\n\t\t\tthis.createRoomRuler = null;\r\n\t\t}\r\n\t}\r\n    /**俱乐部按钮点击*/\r\n    onClubBtnClick(event, param){\r\n        if(this.nowType == 4){\r\n            return;\r\n        }\r\n        this.removeAll();\r\n        this.nowType = 4;\r\n        Global.Utils.debugOutput(\"MainLobbyPanel ==> 俱乐部点击\")\r\n\r\n    }\r\n    /**玩家信息按钮点击*/\r\n    onInfoBtnClick(event, param){\r\n        if(this.nowType == 5){\r\n            return;\r\n        }\r\n        this.removeAll();\r\n        this.nowType = 5;\r\n        Global.Utils.debugOutput(\"MainLobbyPanel ==> 个人信息点击\")\r\n\r\n    }\r\n    private removeAll(){\r\n        if(this.createRoomPanel){\r\n            this.createRoomPanel.disTory();\r\n            this.createRoomPanel = null;\r\n        }\r\n        if(this.createRoomRuler){\r\n            this.createRoomRuler.disTory();\r\n            this.createRoomRuler = null;\r\n        }\r\n    }\r\n    private removeEvent(){\r\n        Global.EventCenter.removeEventListener(EventType.GET_NEW_ROOM_INFO , this.onRspRoomInfo , this);\r\n        Global.EventCenter.removeEventListener(EventType.CreateRoomRuleTipsClick , this.onShowRuleTips , this);\r\n\t\tGlobal.EventCenter.removeEventListener(EventType.RspGetRoomRuleTemplate , this.onGetTemplateBack , this);\r\n\t\tGlobal.EventCenter.removeEventListener(EventType.GameInviteMsg , this.onGameInvite , this);\r\n\r\n    }\r\n\r\n    private onGameInvite():void{\r\n        Global.DialogManager.createDialog(\"smallOver/prefab/InviteToRoomPannel_Hall\",null,(any,dialog)=>{\r\n            dialog.x=540;\r\n            dialog.y=-960;\r\n        })\r\n    }\r\n    destroy(): boolean {\r\n        super.destroy();\r\n        this.removeEvent();\r\n        return true;\r\n    }\r\n\r\n}\r\n"]}